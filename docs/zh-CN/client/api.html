<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>接口 | Turms Documentation</title>
    <meta name="description" content="A VitePress site">
    <link rel="preload stylesheet" href="/docs/assets/style.69f6298a.css" as="style">
    
    <script type="module" src="/docs/assets/app.b51ba44f.js"></script>
    <link rel="preload" href="/docs/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/docs/assets/chunks/framework.0882ee08.js">
    <link rel="modulepreload" href="/docs/assets/chunks/theme.a0e6ceae.js">
    <link rel="modulepreload" href="/docs/assets/chunks/mermaid.core.9a5529a8.js">
    <link rel="modulepreload" href="/docs/assets/zh-CN_client_api.md.d0347a89.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle has-sidebar" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/docs/zh-CN/" data-v-86d1bed8><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://raw.githubusercontent.com/turms-im/assets/master/logo/pegion.svg" alt data-v-8426fc1a><!--]--><!--[-->Turms Documentation<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><!----><div class="VPFlyout VPNavBarTranslations translations" data-v-a0fd61f4 data-v-74abcbb9 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-9c007e85><span class="text" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-9c007e85><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg><!----><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><div class="items" data-v-74abcbb9><p class="title" data-v-74abcbb9>简体中文</p><!--[--><div class="VPMenuLink" data-v-74abcbb9 data-v-43f1e123><a class="VPLink link" href="/docs/client/api.html" data-v-43f1e123><!--[-->English<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a0fd61f4 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/turms-im/turms" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><div class="group translations" data-v-40855f84><p class="trans-title" data-v-40855f84>简体中文</p><!--[--><div class="VPMenuLink" data-v-40855f84 data-v-43f1e123><a class="VPLink link" href="/docs/client/api.html" data-v-43f1e123><!--[-->English<!--]--></a></div><!--]--></div><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/turms-im/turms" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-5a346dfe data-v-79c8c1df><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-79c8c1df><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-79c8c1df><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-79c8c1df>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-b00e2fdd><div class="curtain" data-v-b00e2fdd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b00e2fdd><span class="visually-hidden" id="sidebar-aria-label" data-v-b00e2fdd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><!----><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/index.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/community/index.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>社区常见问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>业务功能</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/feature/index.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>业务功能介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/feature/simultaneous-login.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>多端登录</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/feature/user.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>用户相关功能</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/feature/group.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>群组相关功能</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/feature/message.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>消息相关功能</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>设计</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/design/architecture.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>架构设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/design/schema.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>集合结构设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/design/status-aware.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>状态感知</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>服务端指南</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>部署</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/deployment/getting-started.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>搭建与启动</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/deployment/distribution.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>发布</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/deployment/config.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>配置参数</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>开发</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/development/redevelopment.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>关于二次开发</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/development/rules.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>基本开发规约</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/development/plugin.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>自定义插件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/development/code.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>源码</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/development/testing.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>测试</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>主要模块</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/identity-access-management.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>身份与访问管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/cluster.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>集群的设计与实现</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/system-resource-management.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>系统资源管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/observability.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>可观测性体系</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/security.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>安全</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/xmpp.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>XMPP</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/storage.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>存储服务</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/chatbot.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>聊天机器人</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/anti-spam.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>敏感词过滤</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/server/module/data-analytics.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>数据分析</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible has-active" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>客户端指南</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/client/quick-start.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Quick Start</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/client/requirements.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>版本要求</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/client/api.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/client/session.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>会话的生命周期</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/client/metrics.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>度量数据</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/client/communication-protocol.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>与服务端通信时使用的数据格式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/client/turms-client-js.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>turms-client-js共享上下文</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/client/turms-chat-demo.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Turms Chat Demo</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0" data-v-b00e2fdd data-v-e31bd47b><!----><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/turms-admin.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>turms-admin</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible collapsed" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>手册</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/reference/admin-api.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>管理员API接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/docs/zh-CN/reference/status-code.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>状态码</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>当前页</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _docs_zh-CN_client_api" data-v-6b87e69f><div><h1 id="接口" tabindex="-1">接口 <a class="header-anchor" href="#接口" aria-label="Permalink to &quot;接口&quot;">​</a></h1><p>Turms客户端目前支持JavaScript、Kotlin、Swift与Dart这四种语言，对外暴露一致的接口，并且表现为一致的行为。各语言版本之间的部分接口参数可能出现不完全一致的情况，这主要体现在：1. 接口采用更贴近当前语言特性及习惯的参数与语法；2. turms-client-js独有的参数与接口。</p><p>由于Turms各语言客户端行为具有高度的一致性，因此如果您基于上述任意一种语言进行业务开发，您可以在代码逻辑不做改变的情况下，轻松将已写好的业务代码翻译为另外三种语言（具体可参考在本文结尾处的示例）。</p><h2 id="客户端的对外逻辑结构" tabindex="-1">客户端的对外逻辑结构 <a class="header-anchor" href="#客户端的对外逻辑结构" aria-label="Permalink to &quot;客户端的对外逻辑结构&quot;">​</a></h2><ul><li><p><code>TurmsClient</code>：Turms客户端唯一直接对外暴露的类，一个<code>TurmsClient</code>实例代表着一个客户端与服务端之间的会话连接。以下变量是<code>TurmsClient</code>对外的成员变量。</p><ul><li><p><code>driver</code>：TurmsClient的运行驱动。负责连接的开起关闭、底层数据的发送接收与心跳控制等基础性操作。以下介绍到的Service层类都基于driver运作。</p></li><li><p><code>userService</code>：用户相关服务。负责如用户登陆、添加好友、添加关系人分组、发送/处理好友请求、查询附近的用户等操作。</p></li><li><p><code>groupService</code>：群组相关服务。负责如创建群组、变更群主、修改群成员角色、修改群信息等操作。</p></li><li><p><code>messageService</code>：消息相关服务。负责如发送消息、修改已发送消息、查询各类消息与其状态、撤回消息等操作。</p></li><li><p><code>notificationService</code>：通知相关服务。负责接受与响应业务层面上的通知（比如：其他用户向该用户发送好友请求、群组成员上下线等通知）。 提醒：消息（message）不算做业务层面上的“通知”（notification），因此<code>notificationService</code>不会处理用户消息，用户消息仅由<code>messageService</code>进行处理。而driver中<code>TurmsNotification</code>的“通知”概念指的是网络层面上的Turms服务端给Turms客户端的通知，因此<code>notificationService</code>也不会处理底层的TurmsNotification数据。</p><p>补充：关于通知功能的开启与关闭，您可以在turms服务端<code>im.turms.server.common.infra.property.env.service.business.NotificationProperties</code>处，实时地进行修改。</p></li><li><p><code>storageService</code>：存储相关服务（可选拓展）。负责用户头像、群组头像与消息附件的上传与下载操作。补充：该服务为Turms的拓展服务，因此若您希望使用该功能，您需要将turms-plugin-minio或您自行实现的存储插件集成到turms服务端当中。</p></li></ul></li></ul><h3 id="service中方法的返回值" tabindex="-1">Service中方法的返回值 <a class="header-anchor" href="#service中方法的返回值" aria-label="Permalink to &quot;Service中方法的返回值&quot;">​</a></h3><p>与Turms服务端交互的所有Turms客户端接口都<strong>基于异步模型编写</strong>。turms-client-js使用Promise模型，turms-client-kotlin使用Coroutines模型，而turms-client-swift使用Promise模型（由PromiseKit提供）。</p><p>各种Service可以对Turms所提供的业务数据进行增删改查操作。您需要了解其返回值种类，以开发您自己的业务代码。</p><h4 id="对于状态码为10xx的响应-拓展知识" tabindex="-1">对于状态码为10xx的响应（拓展知识） <a class="header-anchor" href="#对于状态码为10xx的响应-拓展知识" aria-label="Permalink to &quot;对于状态码为10xx的响应（拓展知识）&quot;">​</a></h4><ul><li><p>对于增加业务数据的方法，如果该方法的返回值被声明为一个异步模型（如：<code>Promise&lt;Response&lt;string&gt;&gt;</code>），则返回的泛型（如前文的string类型）的值必定不为空，否则会抛出一个状态码为<code>INVALID_RESPONSE</code>的错误<code>ResponseError</code>或<code>ResponseException</code>，表明本应该存在的数据丢失。若出现该错误，则意味着Turms服务端或客户端自身存在行为不一致的Bug。</p></li><li><p>对于删除与更新业务数据的方法，它们均返回被异步模型包裹的Void类型（如：<code>Promise&lt;Response&lt;Void&gt;&gt;</code>）。</p></li><li><p>对于查找业务数据的方法：</p><p>如果该类方法返回被异步模型包裹的List类型，则当服务端返回空数据时，该查找操作方法会返回一个空List，而非null或undefined。</p><p>如果被包裹的类型不是List类型，则当服务端返回空数据时，该查找操作方法会返回一个<code>undefined</code>（JavaScript）或<code>null</code>（Kotlin）或<code>nil</code>（Swift）。特例：<code>answerGroupQuestions</code>方法可以算做查询方法，但其返回数据永不为空。</p></li></ul><h4 id="对于状态非10xx的响应-拓展知识" tabindex="-1">对于状态非10xx的响应（拓展知识） <a class="header-anchor" href="#对于状态非10xx的响应-拓展知识" aria-label="Permalink to &quot;对于状态非10xx的响应（拓展知识）&quot;">​</a></h4><p>这类响应均被认作是“错误”状态响应。Service中的方法会通过异步模型抛出<code>ResponseError</code>或<code>ResponseException</code>，并且这些错误或异常实例均会携带具体的响应状态码与错误原因。</p><h3 id="主要接口差异-拓展知识" tabindex="-1">主要接口差异（拓展知识） <a class="header-anchor" href="#主要接口差异-拓展知识" aria-label="Permalink to &quot;主要接口差异（拓展知识）&quot;">​</a></h3><p>通常情况下，您并不需要关心各客户端接口之间的差异，但如果您的团队需要由一名开发者基于多个Turms客户端进行上层的开发工作，或者您需要对照您项目的上层客户端代码实现的异同，您可以了解一下客户端间主要接口的不同。</p><p>在早期Turms客户端实现中，各客户端之间的接口参数与数据模型是尽量保持统一的参数配置与含义，如时间相关的参数。但这种强行统一的写法不符合目标语言习惯。同时考虑到在大部分情况下，各客户端的上层业务代码通常有专人负责，而非全由一名开发者负责，统一含义意义不大，并且这些差异也符合目标语言习惯，故不进行强制统一。</p><p>客户端主要接口的差异如下表：</p><table><thead><tr><th></th><th>JavaScript客户端</th><th>Kotlin客户端</th><th>Swift客户端</th><th>Dart客户端</th><th>示例</th></tr></thead><tbody><tr><td>时间单位</td><td>一律为毫秒</td><td>一律为毫秒</td><td>采用TimeInterval（即秒）</td><td>一律为毫秒</td><td>connectTimeout</td></tr><tr><td>响应异常模型</td><td>ResponseError（继承自Error）</td><td>ResponseException（继承自RuntimeException）</td><td>ResponseError（继承自Error）</td><td>ResponseException（继承自Exception）</td><td></td></tr><tr><td>异步模型</td><td>Promise</td><td>Coroutines</td><td>由PromiseKit提供的Promise</td><td>Future</td><td></td></tr></tbody></table><p>补充：对于对外暴露的回调函数实现，Turms的Swift客户端没有采用Swift常见的delegate代理模式，而是和其他语言客户端一样通过函数传递逃逸闭包。</p><h2 id="理解接口-重点" tabindex="-1">理解接口（重点） <a class="header-anchor" href="#理解接口-重点" aria-label="Permalink to &quot;理解接口（重点）&quot;">​</a></h2><p>Turms所有客户端的接口都非常容易理解与使用。开发者甚至不需要看Turms客户端有什么接口，只需要凭借基本的IM业务知识就能反推Turms会有什么接口。</p><p>开发者一般只需要记住：</p><ul><li>通过<code>new TurmsClient(...)</code>创建Turms客户端实例</li><li>在上文<code>客户端的对外逻辑结构</code>提到的：Turms客户端分为五个服务：<code>userService</code>（用户相关服务）、<code>groupService</code>（群组相关服务）、<code>messageService</code>（消息相关服务）、<code>notificationService</code>（通知相关服务）、<code>storageService</code>（存储相关服务、可选拓展）。</li></ul><p>之后我们就能凭借业务知识反推Turms客户端会有什么接口了，比如：</p><ul><li>用户首先要能登陆，于是先想到其对应的服务<code>userService</code>用户相关服务。既然是<code>登陆</code>所以找找有没有<code>login</code>方法，于是自然地就找到了<code>client.userService.login(...)</code>方法。</li><li>登陆后，用户需要能够发消息，那就先想到<code>messageService</code>消息相关服务，再看看有没有类似<code>sendMessage</code>的方法，于是找到了<code>client.messageService.sendMessage(...)</code>方法。</li><li>既然能发消息，那有什么方法能监听收到的消息呢？既然跟消息有关，那依旧想到的是<code>messageService</code>，于是想到方法可能是<code>onMessage</code>、<code>subscribeMessage</code>或<code>addMessageListener</code>，代码里找一找，找到了<code>client.messageService.addMessageListener(...)</code>。</li><li>既然能监听收到的消息，那怎么监听接收到的通知呢？既然跟通知有关，那想到的就是<code>notificationService</code>通知相关类服务，并且既然监听收到的消息的方法叫<code>addMessageListener</code>，那监听通知的方法就应该是<code>addNotificationListener</code>了，于是找到了<code>client.notification.addNotificationListener</code>。</li></ul><p>综上，开发者一般只需凭借基本的业务知识就能反推Turms客户端提供的接口，甚至不需要读Turms客户端的源码。</p><p>而对于高级开发者，Turms客户端也开放了<code>driver</code>对象，让开发者自行实现一些相对底层的操作。另外，如在<code>会话的生命周期</code>提到的，Turms客户端是故意设计的清晰易懂，故意不提供诸如自动重连、自动路由跳转等操作，因为一方面开发者可以很容易地自行实现该类逻辑，另一方面，这类“隐藏”的内部逻辑会使得上层开发者难以把控底层驱动行为，在一些时候反而会成为绊脚石。</p><h2 id="具体示例" tabindex="-1">具体示例 <a class="header-anchor" href="#具体示例" aria-label="Permalink to &quot;具体示例&quot;">​</a></h2><p>以下示例包括turms-client-js/kotlin/swift/dart四个版本，并且其作用等价。具体包括了以下业务操作：初始化客户端、登录、监听会话连接断开（下线）、监听通知、监听新消息、查询附近的用户、发送消息、创建群组操作。</p><h3 id="体验示例前的服务端准备工作" tabindex="-1">体验示例前的服务端准备工作 <a class="header-anchor" href="#体验示例前的服务端准备工作" aria-label="Permalink to &quot;体验示例前的服务端准备工作&quot;">​</a></h3><ul><li>方案一：无需在本地搭建Turms服务端，用户直接在本地通过客户端API连接Playground上的turms-gateway服务端（WebSocket端口：<a href="http://playground.turms.im:10510" target="_blank" rel="noreferrer">http://playground.turms.im:10510</a>；TCP端口：<a href="http://playground.turms.im:11510" target="_blank" rel="noreferrer">http://playground.turms.im:11510</a>）。但注意及时将本地客户端升级到最新版本，以避免出现因为服务端侧的接口更新，导致数据不一致的问题。</li><li>方案二：在<code>application.yaml</code>配置文件中更新以下配置： <ol><li>将<code>turms.gateway.session.enable-authentication</code>设置为<code>false</code>（取消用户登录认证）</li><li>将<code>turms.service.message.allow-sending-messages-to-stranger</code>设置为<code>true</code>（允许没有用户关系的用户互相发送消息）</li></ol></li><li>方案三：使用自带<code>dev</code> profile配置。因为Turms提供的<code>dev</code>profile已做了上述配置。默认情况下，Turms发布包中的<code>application.yaml</code>的<code>profile</code>字段为空，即默认的profile不是<code>dev</code>，需要您手动配置为<code>dev</code>。</li></ul><h3 id="代码示例" tabindex="-1">代码示例 <a class="header-anchor" href="#代码示例" aria-label="Permalink to &quot;代码示例&quot;">​</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-8wjtW" id="tab-H4OpPjJ" checked="checked"><label for="tab-H4OpPjJ">turms-client-js</label><input type="radio" name="group-8wjtW" id="tab-s5hnSXw"><label for="tab-s5hnSXw">turms-client-kotlin</label><input type="radio" name="group-8wjtW" id="tab-G_GqvyN"><label for="tab-G_GqvyN">turms-client-swift</label><input type="radio" name="group-8wjtW" id="tab-_5n76v-"><label for="tab-_5n76v-">turms-client-dart</label></div><div class="blocks"><div class="language-javascript vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// Initialize client</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">client</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TurmsClient</span><span style="color:#E1E4E8;">(); </span><span style="color:#6A737D;">// new TurmsClient(&#39;ws://any-turms-gateway-server.com&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to the offline event</span></span>
<span class="line"><span style="color:#E1E4E8;">client.userService.</span><span style="color:#B392F0;">addOnOfflineListener</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">info</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">info</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">`onOffline: ${</span><span style="color:#E1E4E8;">info</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">closeStatus</span><span style="color:#9ECBFF;">}:${</span><span style="color:#E1E4E8;">info</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">businessStatus</span><span style="color:#9ECBFF;">}:${</span><span style="color:#E1E4E8;">info</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">reason</span><span style="color:#9ECBFF;">}`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound notifications</span></span>
<span class="line"><span style="color:#E1E4E8;">client.notificationService.</span><span style="color:#B392F0;">addNotificationListener</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">notification</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">info</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">`onNotification: Receive a notification from other users or server: ${</span><span style="color:#79B8FF;">JSON</span><span style="color:#9ECBFF;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#9ECBFF;">(</span><span style="color:#E1E4E8;">notification</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;">}`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound messages</span></span>
<span class="line"><span style="color:#E1E4E8;">client.messageService.</span><span style="color:#B392F0;">addMessageListener</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">message</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">info</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">`onMessage: Receive a message from other users or server: ${</span><span style="color:#79B8FF;">JSON</span><span style="color:#9ECBFF;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#9ECBFF;">(</span><span style="color:#E1E4E8;">message</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;">}`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">client.userService.</span><span style="color:#B392F0;">login</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    userId: </span><span style="color:#9ECBFF;">&#39;1&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    password: </span><span style="color:#9ECBFF;">&#39;123&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        client.userService.</span><span style="color:#B392F0;">queryNearbyUsers</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">            latitude: </span><span style="color:#79B8FF;">139.667651</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            longitude: </span><span style="color:#79B8FF;">35.792657</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            maxCount: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            maxDistance: </span><span style="color:#79B8FF;">1000</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">                console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">`nearby users: ${</span><span style="color:#79B8FF;">JSON</span><span style="color:#9ECBFF;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#9ECBFF;">(</span><span style="color:#E1E4E8;">response</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">data</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;">}`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">            });</span></span>
<span class="line"><span style="color:#E1E4E8;">        client.messageService.</span><span style="color:#B392F0;">sendMessage</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">            isGroupMessage: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            targetId: </span><span style="color:#9ECBFF;">&#39;1&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            deliveryDate: </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Date</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"><span style="color:#E1E4E8;">            text: </span><span style="color:#9ECBFF;">&#39;Hello Turms&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            burnAfter: </span><span style="color:#79B8FF;">30</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">                console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">`message ${</span><span style="color:#E1E4E8;">response</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">data</span><span style="color:#9ECBFF;">} has been sent`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">            });</span></span>
<span class="line"><span style="color:#E1E4E8;">        client.groupService.</span><span style="color:#B392F0;">createGroup</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">            name: </span><span style="color:#9ECBFF;">&#39;Turms Developers Group&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            intro: </span><span style="color:#9ECBFF;">&#39;This is a group for the developers who are interested in Turms&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            announcement: </span><span style="color:#9ECBFF;">&#39;nope&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">            .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">                console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">`group ${</span><span style="color:#E1E4E8;">response</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">data</span><span style="color:#9ECBFF;">} has been created`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">            });</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">catch</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">reason</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(reason);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Initialize client</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">client</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TurmsClient</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// new TurmsClient(&#39;ws://any-turms-gateway-server.com&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to the offline event</span></span>
<span class="line"><span style="color:#24292E;">client.userService.</span><span style="color:#6F42C1;">addOnOfflineListener</span><span style="color:#24292E;">(</span><span style="color:#E36209;">info</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">info</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`onOffline: ${</span><span style="color:#24292E;">info</span><span style="color:#032F62;">.</span><span style="color:#24292E;">closeStatus</span><span style="color:#032F62;">}:${</span><span style="color:#24292E;">info</span><span style="color:#032F62;">.</span><span style="color:#24292E;">businessStatus</span><span style="color:#032F62;">}:${</span><span style="color:#24292E;">info</span><span style="color:#032F62;">.</span><span style="color:#24292E;">reason</span><span style="color:#032F62;">}`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound notifications</span></span>
<span class="line"><span style="color:#24292E;">client.notificationService.</span><span style="color:#6F42C1;">addNotificationListener</span><span style="color:#24292E;">(</span><span style="color:#E36209;">notification</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">info</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`onNotification: Receive a notification from other users or server: ${</span><span style="color:#005CC5;">JSON</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#032F62;">(</span><span style="color:#24292E;">notification</span><span style="color:#032F62;">)</span><span style="color:#032F62;">}`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound messages</span></span>
<span class="line"><span style="color:#24292E;">client.messageService.</span><span style="color:#6F42C1;">addMessageListener</span><span style="color:#24292E;">(</span><span style="color:#E36209;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">info</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`onMessage: Receive a message from other users or server: ${</span><span style="color:#005CC5;">JSON</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#032F62;">(</span><span style="color:#24292E;">message</span><span style="color:#032F62;">)</span><span style="color:#032F62;">}`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">client.userService.</span><span style="color:#6F42C1;">login</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    userId: </span><span style="color:#032F62;">&#39;1&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    password: </span><span style="color:#032F62;">&#39;123&#39;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        client.userService.</span><span style="color:#6F42C1;">queryNearbyUsers</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">            latitude: </span><span style="color:#005CC5;">139.667651</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            longitude: </span><span style="color:#005CC5;">35.792657</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            maxCount: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            maxDistance: </span><span style="color:#005CC5;">1000</span></span>
<span class="line"><span style="color:#24292E;">        })</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">(</span><span style="color:#E36209;">response</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`nearby users: ${</span><span style="color:#005CC5;">JSON</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#032F62;">(</span><span style="color:#24292E;">response</span><span style="color:#032F62;">.</span><span style="color:#24292E;">data</span><span style="color:#032F62;">)</span><span style="color:#032F62;">}`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            });</span></span>
<span class="line"><span style="color:#24292E;">        client.messageService.</span><span style="color:#6F42C1;">sendMessage</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">            isGroupMessage: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            targetId: </span><span style="color:#032F62;">&#39;1&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            deliveryDate: </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Date</span><span style="color:#24292E;">(),</span></span>
<span class="line"><span style="color:#24292E;">            text: </span><span style="color:#032F62;">&#39;Hello Turms&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            burnAfter: </span><span style="color:#005CC5;">30</span></span>
<span class="line"><span style="color:#24292E;">        })</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">(</span><span style="color:#E36209;">response</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`message ${</span><span style="color:#24292E;">response</span><span style="color:#032F62;">.</span><span style="color:#24292E;">data</span><span style="color:#032F62;">} has been sent`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            });</span></span>
<span class="line"><span style="color:#24292E;">        client.groupService.</span><span style="color:#6F42C1;">createGroup</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">            name: </span><span style="color:#032F62;">&#39;Turms Developers Group&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            intro: </span><span style="color:#032F62;">&#39;This is a group for the developers who are interested in Turms&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            announcement: </span><span style="color:#032F62;">&#39;nope&#39;</span></span>
<span class="line"><span style="color:#24292E;">        })</span></span>
<span class="line"><span style="color:#24292E;">            .</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">(</span><span style="color:#E36209;">response</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`group ${</span><span style="color:#24292E;">response</span><span style="color:#032F62;">.</span><span style="color:#24292E;">data</span><span style="color:#032F62;">} has been created`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            });</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">catch</span><span style="color:#24292E;">(</span><span style="color:#E36209;">reason</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">error</span><span style="color:#24292E;">(reason);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span></code></pre></div><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// Initialize client</span></span>
<span class="line"><span style="color:#F97583;">val</span><span style="color:#E1E4E8;"> client </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TurmsClient</span><span style="color:#E1E4E8;">() </span><span style="color:#6A737D;">// TurmsClient(&quot;127.0.0.1&quot;, 11510)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to the offline event</span></span>
<span class="line"><span style="color:#E1E4E8;">client.userService.</span><span style="color:#B392F0;">addOnOfflineListener</span><span style="color:#E1E4E8;"> { info </span><span style="color:#F97583;">-&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;onOffline: ${info.closeStatus}:${info.businessStatus}:${info.reason}&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound notifications</span></span>
<span class="line"><span style="color:#E1E4E8;">client.notificationService.</span><span style="color:#B392F0;">addNotificationListener</span><span style="color:#E1E4E8;"> { notification </span><span style="color:#F97583;">-&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;onNotification: Receive a notification from other users or server: </span><span style="color:#79B8FF;">$notification</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound messages</span></span>
<span class="line"><span style="color:#E1E4E8;">client.messageService.</span><span style="color:#B392F0;">addMessageListener</span><span style="color:#E1E4E8;"> { message, _ </span><span style="color:#F97583;">-&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;onMessage: Receive a message from other users or server: </span><span style="color:#79B8FF;">$message</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">client.userService.</span><span style="color:#B392F0;">login</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;123&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">val</span><span style="color:#E1E4E8;"> users </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> client.userService.</span><span style="color:#B392F0;">queryNearbyUsers</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">35.792657f</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">139.667651f</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1000</span></span>
<span class="line"><span style="color:#E1E4E8;">).</span><span style="color:#F97583;">data</span></span>
<span class="line"><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;nearby users: [${users.</span><span style="color:#B392F0;">joinToString</span><span style="color:#9ECBFF;">(&quot;, &quot;)}]&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">val</span><span style="color:#E1E4E8;"> msgId </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> client.messageService.</span><span style="color:#B392F0;">sendMessage</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Date</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;Hello Turms&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">30</span></span>
<span class="line"><span style="color:#E1E4E8;">).</span><span style="color:#F97583;">data</span></span>
<span class="line"><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;message </span><span style="color:#79B8FF;">$msgId</span><span style="color:#9ECBFF;"> has been sent&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">val</span><span style="color:#E1E4E8;"> groupId </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> client.groupService.</span><span style="color:#B392F0;">createGroup</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;Turms Developers Group&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;This is a group for the developers who are interested in Turms&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;nope&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">).</span><span style="color:#F97583;">data</span></span>
<span class="line"><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;group </span><span style="color:#79B8FF;">$groupId</span><span style="color:#9ECBFF;"> has been created&quot;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Initialize client</span></span>
<span class="line"><span style="color:#D73A49;">val</span><span style="color:#24292E;"> client </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TurmsClient</span><span style="color:#24292E;">() </span><span style="color:#6A737D;">// TurmsClient(&quot;127.0.0.1&quot;, 11510)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to the offline event</span></span>
<span class="line"><span style="color:#24292E;">client.userService.</span><span style="color:#6F42C1;">addOnOfflineListener</span><span style="color:#24292E;"> { info </span><span style="color:#D73A49;">-&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;onOffline: ${info.closeStatus}:${info.businessStatus}:${info.reason}&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound notifications</span></span>
<span class="line"><span style="color:#24292E;">client.notificationService.</span><span style="color:#6F42C1;">addNotificationListener</span><span style="color:#24292E;"> { notification </span><span style="color:#D73A49;">-&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;onNotification: Receive a notification from other users or server: </span><span style="color:#005CC5;">$notification</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound messages</span></span>
<span class="line"><span style="color:#24292E;">client.messageService.</span><span style="color:#6F42C1;">addMessageListener</span><span style="color:#24292E;"> { message, _ </span><span style="color:#D73A49;">-&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;onMessage: Receive a message from other users or server: </span><span style="color:#005CC5;">$message</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">client.userService.</span><span style="color:#6F42C1;">login</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;123&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">val</span><span style="color:#24292E;"> users </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> client.userService.</span><span style="color:#6F42C1;">queryNearbyUsers</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">35.792657f</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">139.667651f</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">1000</span></span>
<span class="line"><span style="color:#24292E;">).</span><span style="color:#D73A49;">data</span></span>
<span class="line"><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;nearby users: [${users.</span><span style="color:#6F42C1;">joinToString</span><span style="color:#032F62;">(&quot;, &quot;)}]&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">val</span><span style="color:#24292E;"> msgId </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> client.messageService.</span><span style="color:#6F42C1;">sendMessage</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Date</span><span style="color:#24292E;">(),</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;Hello Turms&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">30</span></span>
<span class="line"><span style="color:#24292E;">).</span><span style="color:#D73A49;">data</span></span>
<span class="line"><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;message </span><span style="color:#005CC5;">$msgId</span><span style="color:#032F62;"> has been sent&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">val</span><span style="color:#24292E;"> groupId </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> client.groupService.</span><span style="color:#6F42C1;">createGroup</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;Turms Developers Group&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;This is a group for the developers who are interested in Turms&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;nope&quot;</span></span>
<span class="line"><span style="color:#24292E;">).</span><span style="color:#D73A49;">data</span></span>
<span class="line"><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;group </span><span style="color:#005CC5;">$groupId</span><span style="color:#032F62;"> has been created&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div><div class="language-swift vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// Initialize client</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> client </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TurmsClient</span><span style="color:#E1E4E8;">() </span><span style="color:#6A737D;">// TurmsClient(&quot;127.0.0.1&quot;, 11510)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to the offline event</span></span>
<span class="line"><span style="color:#E1E4E8;">client.userService.addOfflineListener { (</span><span style="color:#79B8FF;">info</span><span style="color:#E1E4E8;">: SessionCloseInfo) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">in</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;onSessionDisconnected: </span><span style="color:#9ECBFF;">\(info.</span><span style="color:#E1E4E8;">closeStatus</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;">:</span><span style="color:#9ECBFF;">\(info.</span><span style="color:#E1E4E8;">businessStatus</span><span style="color:#9ECBFF;"> </span><span style="color:#F97583;">??</span><span style="color:#9ECBFF;"> </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;">:</span><span style="color:#9ECBFF;">\(info.</span><span style="color:#E1E4E8;">reason</span><span style="color:#9ECBFF;"> </span><span style="color:#F97583;">??</span><span style="color:#9ECBFF;"> </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound notifications</span></span>
<span class="line"><span style="color:#E1E4E8;">client.notificationService.addNotificationListener { (</span><span style="color:#79B8FF;">notification</span><span style="color:#E1E4E8;">: TurmsRequest) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">in</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;onNotification: Receive a notification from other users or server: </span><span style="color:#9ECBFF;">\(</span><span style="color:#F97583;">try!</span><span style="color:#9ECBFF;"> notification.</span><span style="color:#79B8FF;">jsonString</span><span style="color:#9ECBFF;">())</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound messages</span></span>
<span class="line"><span style="color:#E1E4E8;">client.messageService.addMessageListener{ (</span><span style="color:#79B8FF;">message</span><span style="color:#E1E4E8;">: Message, </span><span style="color:#79B8FF;">_</span><span style="color:#E1E4E8;">: MessageAddition) </span><span style="color:#F97583;">-&gt;</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">in</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;onMessage: Receive a message from other users or server: </span><span style="color:#9ECBFF;">\(</span><span style="color:#F97583;">try!</span><span style="color:#9ECBFF;"> message.</span><span style="color:#79B8FF;">jsonString</span><span style="color:#9ECBFF;">())</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">client.userService.</span><span style="color:#79B8FF;">login</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">userId</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">password</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;123&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .done {</span></span>
<span class="line"><span style="color:#E1E4E8;">        client.userService.</span><span style="color:#79B8FF;">queryNearbyUsers</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">latitude</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">35.792657</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">longitude</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">139.667651</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">maxCount</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">maxDistance</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .done {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;nearby users: </span><span style="color:#9ECBFF;">\(</span><span style="color:#79B8FF;">$0</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">data</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        client.messageService.</span><span style="color:#79B8FF;">sendMessage</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">isGroupMessage</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">toId</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">deliveryDate</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">Date</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Hello Turms&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">records</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">nil</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">burnAfter</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .done {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;message </span><span style="color:#9ECBFF;">\(</span><span style="color:#79B8FF;">$0</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">data</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;"> has been sent&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        client.groupService.</span><span style="color:#79B8FF;">createGroup</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Turms Developers Group&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">intro</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;This is a group for the developers who are interested in Turms&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">announcement</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;nope&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            .done {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;group </span><span style="color:#9ECBFF;">\(</span><span style="color:#79B8FF;">$0</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">data</span><span style="color:#9ECBFF;">)</span><span style="color:#9ECBFF;"> has been created&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }.catch {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">$0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Initialize client</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> client </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">TurmsClient</span><span style="color:#24292E;">() </span><span style="color:#6A737D;">// TurmsClient(&quot;127.0.0.1&quot;, 11510)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to the offline event</span></span>
<span class="line"><span style="color:#24292E;">client.userService.addOfflineListener { (</span><span style="color:#005CC5;">info</span><span style="color:#24292E;">: SessionCloseInfo) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">in</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;onSessionDisconnected: </span><span style="color:#032F62;">\(info.</span><span style="color:#24292E;">closeStatus</span><span style="color:#032F62;">)</span><span style="color:#032F62;">:</span><span style="color:#032F62;">\(info.</span><span style="color:#24292E;">businessStatus</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">??</span><span style="color:#032F62;"> </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">:</span><span style="color:#032F62;">\(info.</span><span style="color:#24292E;">reason</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">??</span><span style="color:#032F62;"> </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound notifications</span></span>
<span class="line"><span style="color:#24292E;">client.notificationService.addNotificationListener { (</span><span style="color:#005CC5;">notification</span><span style="color:#24292E;">: TurmsRequest) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">in</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;onNotification: Receive a notification from other users or server: </span><span style="color:#032F62;">\(</span><span style="color:#D73A49;">try!</span><span style="color:#032F62;"> notification.</span><span style="color:#005CC5;">jsonString</span><span style="color:#032F62;">())</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound messages</span></span>
<span class="line"><span style="color:#24292E;">client.messageService.addMessageListener{ (</span><span style="color:#005CC5;">message</span><span style="color:#24292E;">: Message, </span><span style="color:#005CC5;">_</span><span style="color:#24292E;">: MessageAddition) </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">in</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;onMessage: Receive a message from other users or server: </span><span style="color:#032F62;">\(</span><span style="color:#D73A49;">try!</span><span style="color:#032F62;"> message.</span><span style="color:#005CC5;">jsonString</span><span style="color:#032F62;">())</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">client.userService.</span><span style="color:#005CC5;">login</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">userId</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">password</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;123&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .done {</span></span>
<span class="line"><span style="color:#24292E;">        client.userService.</span><span style="color:#005CC5;">queryNearbyUsers</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">latitude</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">35.792657</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">longitude</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">139.667651</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">maxCount</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">maxDistance</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .done {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;nearby users: </span><span style="color:#032F62;">\(</span><span style="color:#005CC5;">$0</span><span style="color:#032F62;">.</span><span style="color:#24292E;">data</span><span style="color:#032F62;">)</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        client.messageService.</span><span style="color:#005CC5;">sendMessage</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">isGroupMessage</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">toId</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">deliveryDate</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">Date</span><span style="color:#24292E;">(),</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">text</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Hello Turms&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">records</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">nil</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">burnAfter</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .done {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;message </span><span style="color:#032F62;">\(</span><span style="color:#005CC5;">$0</span><span style="color:#032F62;">.</span><span style="color:#24292E;">data</span><span style="color:#032F62;">)</span><span style="color:#032F62;"> has been sent&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        client.groupService.</span><span style="color:#005CC5;">createGroup</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Turms Developers Group&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">intro</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;This is a group for the developers who are interested in Turms&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">announcement</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;nope&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            .done {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;group </span><span style="color:#032F62;">\(</span><span style="color:#005CC5;">$0</span><span style="color:#032F62;">.</span><span style="color:#24292E;">data</span><span style="color:#032F62;">)</span><span style="color:#032F62;"> has been created&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">    }.catch {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">$0</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span></code></pre></div><div class="language-dart vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// Initialize client</span></span>
<span class="line"><span style="color:#F97583;">final</span><span style="color:#E1E4E8;"> client </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TurmsClient</span><span style="color:#E1E4E8;">(); </span><span style="color:#6A737D;">// TurmsClient(host: &#39;127.0.0.1&#39;, port: 11510)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to the offline event</span></span>
<span class="line"><span style="color:#E1E4E8;">client.userService.</span><span style="color:#B392F0;">addOnOfflineListener</span><span style="color:#E1E4E8;">((info) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;onOffline: ${</span><span style="color:#79B8FF;">info</span><span style="color:#9ECBFF;">.</span><span style="color:#79B8FF;">closeStatus</span><span style="color:#9ECBFF;">}:${</span><span style="color:#79B8FF;">info</span><span style="color:#9ECBFF;">.</span><span style="color:#79B8FF;">businessStatus</span><span style="color:#9ECBFF;">}:${</span><span style="color:#79B8FF;">info</span><span style="color:#9ECBFF;">.</span><span style="color:#79B8FF;">reason</span><span style="color:#9ECBFF;">}&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound notifications</span></span>
<span class="line"><span style="color:#E1E4E8;">client.notificationService.</span><span style="color:#B392F0;">addNotificationListener</span><span style="color:#E1E4E8;">((notification) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;onNotification: Receive a notification from other users or server: $</span><span style="color:#79B8FF;">notification</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound messages</span></span>
<span class="line"><span style="color:#E1E4E8;">client.messageService.</span><span style="color:#B392F0;">addMessageListener</span><span style="color:#E1E4E8;">((message, _) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;onMessage: Receive a message from other users or server: $</span><span style="color:#79B8FF;">message</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> client.userService.</span><span style="color:#B392F0;">login</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">Int64</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">), password</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;123&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">final</span><span style="color:#E1E4E8;"> users </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> client.userService.</span><span style="color:#B392F0;">queryNearbyUsers</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">35.792657</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">139.667651</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        maxCount</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, maxDistance</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    .data;</span></span>
<span class="line"><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;nearby users: $</span><span style="color:#79B8FF;">users</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">final</span><span style="color:#E1E4E8;"> msgId </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> client.messageService</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">sendMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">Int64</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">), text</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Hello Turms&#39;</span><span style="color:#E1E4E8;">, burnAfter</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    .data;</span></span>
<span class="line"><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;message $</span><span style="color:#79B8FF;">msgId</span><span style="color:#9ECBFF;"> has been sent&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">final</span><span style="color:#E1E4E8;"> groupId </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> client.groupService.</span><span style="color:#B392F0;">createGroup</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;Turms Developers Group&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        announcement</span><span style="color:#F97583;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;This is a group for the developers who are interested in Turms&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        intro</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;nope&#39;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    .data;</span></span>
<span class="line"><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;group $</span><span style="color:#79B8FF;">groupId</span><span style="color:#9ECBFF;"> has been created&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Initialize client</span></span>
<span class="line"><span style="color:#D73A49;">final</span><span style="color:#24292E;"> client </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">TurmsClient</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// TurmsClient(host: &#39;127.0.0.1&#39;, port: 11510)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to the offline event</span></span>
<span class="line"><span style="color:#24292E;">client.userService.</span><span style="color:#6F42C1;">addOnOfflineListener</span><span style="color:#24292E;">((info) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;onOffline: ${</span><span style="color:#005CC5;">info</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">closeStatus</span><span style="color:#032F62;">}:${</span><span style="color:#005CC5;">info</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">businessStatus</span><span style="color:#032F62;">}:${</span><span style="color:#005CC5;">info</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">reason</span><span style="color:#032F62;">}&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound notifications</span></span>
<span class="line"><span style="color:#24292E;">client.notificationService.</span><span style="color:#6F42C1;">addNotificationListener</span><span style="color:#24292E;">((notification) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;onNotification: Receive a notification from other users or server: $</span><span style="color:#005CC5;">notification</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Listen to inbound messages</span></span>
<span class="line"><span style="color:#24292E;">client.messageService.</span><span style="color:#6F42C1;">addMessageListener</span><span style="color:#24292E;">((message, _) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;onMessage: Receive a message from other users or server: $</span><span style="color:#005CC5;">message</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> client.userService.</span><span style="color:#6F42C1;">login</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">Int64</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">), password</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;123&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">final</span><span style="color:#24292E;"> users </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> client.userService.</span><span style="color:#6F42C1;">queryNearbyUsers</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">35.792657</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">139.667651</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        maxCount</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, maxDistance</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">    .data;</span></span>
<span class="line"><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;nearby users: $</span><span style="color:#005CC5;">users</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">final</span><span style="color:#24292E;"> msgId </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> client.messageService</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">sendMessage</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">Int64</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">), text</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Hello Turms&#39;</span><span style="color:#24292E;">, burnAfter</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">    .data;</span></span>
<span class="line"><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;message $</span><span style="color:#005CC5;">msgId</span><span style="color:#032F62;"> has been sent&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">final</span><span style="color:#24292E;"> groupId </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> client.groupService.</span><span style="color:#6F42C1;">createGroup</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;Turms Developers Group&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        announcement</span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&#39;This is a group for the developers who are interested in Turms&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        intro</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;nope&#39;</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">    .data;</span></span>
<span class="line"><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;group $</span><span style="color:#005CC5;">groupId</span><span style="color:#032F62;"> has been created&#39;</span><span style="color:#24292E;">);</span></span></code></pre></div></div></div></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><!----><nav class="prev-next" data-v-ef5dee53><div class="pager" data-v-ef5dee53><a class="pager-link prev" href="/docs/zh-CN/client/requirements.html" data-v-ef5dee53><span class="desc" data-v-ef5dee53>上一页</span><span class="title" data-v-ef5dee53>版本要求</span></a></div><div class="pager" data-v-ef5dee53><a class="pager-link next" href="/docs/zh-CN/client/session.html" data-v-ef5dee53><span class="desc" data-v-ef5dee53>下一页</span><span class="title" data-v-ef5dee53>会话的生命周期</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"feature_simultaneous-login.md\":\"f7c62cdc\",\"design_status-aware.md\":\"f346f12c\",\"server_development_testing.md\":\"bcef65b5\",\"feature_user.md\":\"a73ae67a\",\"turms-admin.md\":\"e78a83e8\",\"zh-cn_client_communication-protocol.md\":\"c3b01846\",\"server_module_chatbot.md\":\"a5496727\",\"client_turms-client-js.md\":\"90459bf7\",\"client_metrics.md\":\"d00c67a6\",\"client_requirements.md\":\"2fe21189\",\"client_communication-protocol.md\":\"ece16fe5\",\"reference_status-code.md\":\"8b2b7d6a\",\"design_architecture.md\":\"a62a79fa\",\"client_session.md\":\"aad38adf\",\"reference_admin-api.md\":\"cd1aa4c1\",\"server_module_storage.md\":\"53d425fa\",\"server_module_anti-spam.md\":\"1eb3d9b0\",\"server_deployment_config.md\":\"eba96f57\",\"zh-cn_feature_simultaneous-login.md\":\"d2fc551a\",\"server_development_redevelopment.md\":\"fbceab5a\",\"server_development_code.md\":\"8d1c62a0\",\"zh-cn_feature_index.md\":\"35f4ed6d\",\"server_module_data-analytics.md\":\"89dd732f\",\"server_module_identity-access-management.md\":\"d442d570\",\"server_module_xmpp.md\":\"dcf5ade5\",\"server_module_observability.md\":\"536db662\",\"zh-cn_feature_group.md\":\"cb522884\",\"server_module_security.md\":\"2811177b\",\"zh-cn_reference_status-code.md\":\"e5fb4bed\",\"server_development_plugin.md\":\"0ab61579\",\"feature_group.md\":\"82db277a\",\"zh-cn_server_development_rules.md\":\"d361d583\",\"zh-cn_server_development_testing.md\":\"7382a948\",\"zh-cn_server_development_plugin.md\":\"35ccbe27\",\"zh-cn_server_development_redevelopment.md\":\"55189f5c\",\"zh-cn_server_module_anti-spam.md\":\"4c2dcfde\",\"zh-cn_server_development_code.md\":\"a90098da\",\"zh-cn_server_module_chatbot.md\":\"8b1749eb\",\"zh-cn_server_module_data-analytics.md\":\"0e180478\",\"zh-cn_server_module_identity-access-management.md\":\"007a1fbc\",\"zh-cn_turms-admin.md\":\"b9c1d665\",\"zh-cn_design_schema.md\":\"067d7975\",\"zh-cn_client_metrics.md\":\"4e0dce30\",\"zh-cn_feature_user.md\":\"512ab7fc\",\"server_deployment_distribution.md\":\"76550939\",\"zh-cn_server_module_system-resource-management.md\":\"71ac4014\",\"client_turms-chat-demo.md\":\"7b5e1548\",\"index.md\":\"88e8fd9c\",\"zh-cn_client_session.md\":\"8e3853f1\",\"zh-cn_client_turms-chat-demo.md\":\"8c9402cb\",\"feature_index.md\":\"dc889387\",\"zh-cn_client_quick-start.md\":\"242732d8\",\"zh-cn_client_turms-client-js.md\":\"de32f7bf\",\"zh-cn_community_index.md\":\"7d14e5f0\",\"zh-cn_design_architecture.md\":\"1e666ada\",\"zh-cn_client_requirements.md\":\"334bb1c0\",\"zh-cn_reference_admin-api.md\":\"aa307b66\",\"server_module_cluster.md\":\"871e6a9f\",\"client_api.md\":\"60683cd1\",\"zh-cn_client_api.md\":\"d0347a89\",\"server_module_system-resource-management.md\":\"14cf6b55\",\"zh-cn_index.md\":\"19b7ad26\",\"zh-cn_server_deployment_distribution.md\":\"6598d373\",\"server_development_rules.md\":\"d366e1d5\",\"zh-cn_server_deployment_config.md\":\"45a83055\",\"client_quick-start.md\":\"2495bdda\",\"server_deployment_getting-started.md\":\"db0bd29d\",\"zh-cn_server_deployment_getting-started.md\":\"bc587018\",\"zh-cn_server_module_storage.md\":\"7a7fd54a\",\"zh-cn_server_module_security.md\":\"e70930d1\",\"zh-cn_server_module_cluster.md\":\"a5af839f\",\"zh-cn_server_module_observability.md\":\"f5a551b7\",\"zh-cn_server_module_xmpp.md\":\"d1012659\",\"zh-cn_feature_message.md\":\"0c4082f1\",\"design_schema.md\":\"32995249\",\"zh-cn_design_status-aware.md\":\"02556b58\",\"community_index.md\":\"d5c5ea8c\",\"feature_message.md\":\"5a764148\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Turms Documentation\",\"description\":\"A VitePress site\",\"base\":\"/docs/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"https://raw.githubusercontent.com/turms-im/assets/master/logo/pegion.svg\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/turms-im/turms\"}],\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"WV3XO0QV2E\",\"apiKey\":\"f7a7c652875d1f2cc0f0ec52d8f8f660\",\"indexName\":\"turms-imio\",\"locales\":{\"zh-CN\":{\"placeholder\":\"搜索\",\"translations\":{\"button\":{\"buttonText\":\"搜索\",\"buttonAriaLabel\":\"搜索\"},\"modal\":{\"searchBox\":{\"resetButtonTitle\":\"重置查询\",\"resetButtonAriaLabel\":\"重置查询\",\"cancelButtonText\":\"取消\",\"cancelButtonAriaLabel\":\"取消\"},\"startScreen\":{\"recentSearchesTitle\":\"搜索历史\",\"noRecentSearchesText\":\"没有搜索历史\",\"saveRecentSearchButtonTitle\":\"保存至搜索历史\",\"removeRecentSearchButtonTitle\":\"从搜索历史中移除\",\"favoriteSearchesTitle\":\"收藏\",\"removeFavoriteSearchButtonTitle\":\"从收藏中移除\"},\"errorScreen\":{\"titleText\":\"无法获取搜索结果\",\"helpText\":\"请检查网络连接\"},\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\",\"searchByText\":\"搜索提供者\"},\"noResultsScreen\":{\"noResultsText\":\"没有找到相关结果\",\"suggestedQueryText\":\"您可能想搜索\",\"reportMissingResultsLinkText\":\"点击反馈\",\"reportMissingResultsText\":\"没有找到结果？请报告缺失\"}}}}}}}},\"locales\":{\"root\":{\"label\":\"English\",\"lang\":\"en\",\"themeConfig\":{\"sidebar\":[{\"text\":\"Introduction\",\"link\":\"/index.md\"},{\"text\":\"Community FAQ\",\"link\":\"/community/index.md\"},{\"text\":\"Business Features\",\"collapsed\":true,\"items\":[{\"text\":\"Business Features\",\"link\":\"/feature/index.md\"},{\"text\":\"Simultaneous Login\",\"link\":\"/feature/simultaneous-login.md\"},{\"text\":\"User-related Features\",\"link\":\"/feature/user.md\"},{\"text\":\"Group-related Features\",\"link\":\"/feature/group.md\"},{\"text\":\"Message-related Features\",\"link\":\"/feature/message.md\"}]},{\"text\":\"Design\",\"collapsed\":true,\"items\":[{\"text\":\"Architecture Design\",\"link\":\"/design/architecture.md\"},{\"text\":\"Collection Schema Design\",\"link\":\"/design/schema.md\"},{\"text\":\"Status Awareness\",\"link\":\"/design/status-aware.md\"}]},{\"text\":\"Server Guide\",\"collapsed\":true,\"items\":[{\"text\":\"Deployment\",\"items\":[{\"text\":\"Build and Start\",\"link\":\"/server/deployment/getting-started.md\"},{\"text\":\"Distribution\",\"link\":\"/server/deployment/distribution.md\"},{\"text\":\"Configuration\",\"link\":\"/server/deployment/config.md\"}]},{\"text\":\"Development\",\"items\":[{\"text\":\"About Secondary Development\",\"link\":\"/server/development/redevelopment.md\"},{\"text\":\"Basic Development Rules\",\"link\":\"/server/development/rules.md\"},{\"text\":\"Custom Plugins\",\"link\":\"/server/development/plugin.md\"},{\"text\":\"Source Code\",\"link\":\"/server/development/code.md\"},{\"text\":\"Testing\",\"link\":\"/server/development/testing.md\"}]},{\"text\":\"Main Modules\",\"items\":[{\"text\":\"Identity and Access Management\",\"link\":\"/server/module/identity-access-management.md\"},{\"text\":\"Cluster Design and Implementation\",\"link\":\"/server/module/cluster.md\"},{\"text\":\"System Resource Management\",\"link\":\"/server/module/system-resource-management.md\"},{\"text\":\"Observability\",\"link\":\"/server/module/observability.md\"},{\"text\":\"Security\",\"link\":\"/server/module/security.md\"},{\"text\":\"XMPP\",\"link\":\"/server/module/xmpp.md\"},{\"text\":\"Storage Service\",\"link\":\"/server/module/storage.md\"},{\"text\":\"Chatbot\",\"link\":\"/server/module/chatbot.md\"},{\"text\":\"Content Moderation\",\"link\":\"/server/module/anti-spam.md\"},{\"text\":\"Data Analysis\",\"link\":\"/server/module/data-analytics.md\"}]}]},{\"text\":\"Client Guide\",\"collapsed\":true,\"items\":[{\"text\":\"Quick Start\",\"link\":\"/client/quick-start.md\"},{\"text\":\"Version Requirements\",\"link\":\"/client/requirements.md\"},{\"text\":\"API\",\"link\":\"/client/api.md\"},{\"text\":\"Session Lifecycle\",\"link\":\"/client/session.md\"},{\"text\":\"Metrics\",\"link\":\"/client/metrics.md\"},{\"text\":\"Communication Protocol Used Between Client and Server\",\"link\":\"/client/communication-protocol.md\"},{\"text\":\"turms-client-js Shared Context\",\"link\":\"/client/turms-client-js.md\"},{\"text\":\"Turms Chat Demo\",\"link\":\"/client/turms-chat-demo.md\"}]},{\"text\":\"turms-admin\",\"link\":\"/turms-admin.md\"},{\"text\":\"Reference\",\"collapsed\":true,\"items\":[{\"text\":\"Admin API\",\"link\":\"/reference/admin-api.md\"},{\"text\":\"Status Code\",\"link\":\"/reference/status-code.md\"}]}]}},\"zh-CN\":{\"label\":\"简体中文\",\"lang\":\"zh-CN\",\"themeConfig\":{\"lastUpdatedText\":\"上次更新\",\"outline\":{\"label\":\"当前页\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"sidebar\":[{\"text\":\"介绍\",\"link\":\"/zh-CN/index.md\"},{\"text\":\"社区常见问题\",\"link\":\"/zh-CN/community/index.md\"},{\"text\":\"业务功能\",\"collapsed\":true,\"items\":[{\"text\":\"业务功能介绍\",\"link\":\"/zh-CN/feature/index.md\"},{\"text\":\"多端登录\",\"link\":\"/zh-CN/feature/simultaneous-login.md\"},{\"text\":\"用户相关功能\",\"link\":\"/zh-CN/feature/user.md\"},{\"text\":\"群组相关功能\",\"link\":\"/zh-CN/feature/group.md\"},{\"text\":\"消息相关功能\",\"link\":\"/zh-CN/feature/message.md\"}]},{\"text\":\"设计\",\"collapsed\":true,\"items\":[{\"text\":\"架构设计\",\"link\":\"/zh-CN/design/architecture.md\"},{\"text\":\"集合结构设计\",\"link\":\"/zh-CN/design/schema.md\"},{\"text\":\"状态感知\",\"link\":\"/zh-CN/design/status-aware.md\"}]},{\"text\":\"服务端指南\",\"collapsed\":true,\"items\":[{\"text\":\"部署\",\"items\":[{\"text\":\"搭建与启动\",\"link\":\"/zh-CN/server/deployment/getting-started.md\"},{\"text\":\"发布\",\"link\":\"/zh-CN/server/deployment/distribution.md\"},{\"text\":\"配置参数\",\"link\":\"/zh-CN/server/deployment/config.md\"}]},{\"text\":\"开发\",\"items\":[{\"text\":\"关于二次开发\",\"link\":\"/zh-CN/server/development/redevelopment.md\"},{\"text\":\"基本开发规约\",\"link\":\"/zh-CN/server/development/rules.md\"},{\"text\":\"自定义插件\",\"link\":\"/zh-CN/server/development/plugin.md\"},{\"text\":\"源码\",\"link\":\"/zh-CN/server/development/code.md\"},{\"text\":\"测试\",\"link\":\"/zh-CN/server/development/testing.md\"}]},{\"text\":\"主要模块\",\"items\":[{\"text\":\"身份与访问管理\",\"link\":\"/zh-CN/server/module/identity-access-management.md\"},{\"text\":\"集群的设计与实现\",\"link\":\"/zh-CN/server/module/cluster.md\"},{\"text\":\"系统资源管理\",\"link\":\"/zh-CN/server/module/system-resource-management.md\"},{\"text\":\"可观测性体系\",\"link\":\"/zh-CN/server/module/observability.md\"},{\"text\":\"安全\",\"link\":\"/zh-CN/server/module/security.md\"},{\"text\":\"XMPP\",\"link\":\"/zh-CN/server/module/xmpp.md\"},{\"text\":\"存储服务\",\"link\":\"/zh-CN/server/module/storage.md\"},{\"text\":\"聊天机器人\",\"link\":\"/zh-CN/server/module/chatbot.md\"},{\"text\":\"敏感词过滤\",\"link\":\"/zh-CN/server/module/anti-spam.md\"},{\"text\":\"数据分析\",\"link\":\"/zh-CN/server/module/data-analytics.md\"}]}]},{\"text\":\"客户端指南\",\"collapsed\":true,\"items\":[{\"text\":\"Quick Start\",\"link\":\"/zh-CN/client/quick-start.md\"},{\"text\":\"版本要求\",\"link\":\"/zh-CN/client/requirements.md\"},{\"text\":\"接口\",\"link\":\"/zh-CN/client/api.md\"},{\"text\":\"会话的生命周期\",\"link\":\"/zh-CN/client/session.md\"},{\"text\":\"度量数据\",\"link\":\"/zh-CN/client/metrics.md\"},{\"text\":\"与服务端通信时使用的数据格式\",\"link\":\"/zh-CN/client/communication-protocol.md\"},{\"text\":\"turms-client-js共享上下文\",\"link\":\"/zh-CN/client/turms-client-js.md\"},{\"text\":\"Turms Chat Demo\",\"link\":\"/zh-CN/client/turms-chat-demo.md\"}]},{\"text\":\"turms-admin\",\"link\":\"/zh-CN/turms-admin.md\"},{\"text\":\"手册\",\"collapsed\":true,\"items\":[{\"text\":\"管理员API接口\",\"link\":\"/zh-CN/reference/admin-api.md\"},{\"text\":\"状态码\",\"link\":\"/zh-CN/reference/status-code.md\"}]}]}}},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>