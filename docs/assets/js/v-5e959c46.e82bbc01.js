"use strict";(self.webpackChunkturms_docs=self.webpackChunkturms_docs||[]).push([[315],{3023:(t,e,r)=>{r.r(e),r.d(e,{default:()=>O});var l=r(6252);const d=(0,l._)("h1",{id:"管理员api接口",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#管理员api接口","aria-hidden":"true"},"#"),(0,l.Uk)(" 管理员API接口")],-1),a=(0,l.Uk)("Turms的API文档基于"),n={href:"https://github.com/springdoc/springdoc-openapi",target:"_blank",rel:"noopener noreferrer"},s=(0,l.Uk)("Springdoc"),o=(0,l.Uk)("依赖实现，并采用"),i={href:"https://swagger.io/specification",target:"_blank",rel:"noopener noreferrer"},h=(0,l.Uk)("OpenAPI 3.0"),u=(0,l.Uk)("标准。"),g=(0,l._)("p",null,"Turms在生产环境下默认开启OpenAPI的UI与API接口，并与Admin API接口一样使用8510端口（turms-gateway没有OpenAPI接口）。如果您需要查阅API接口文档，您可以在启动turms服务端后，访问 http://localhost:8510/swagger-ui.html 查阅API接口。如果您需要API接口的JSON数据，可访问 http://localhost:8510/v3/api-docs 获取。",-1),c=(0,l._)("p",null,"注意：在将Turms服务端部署到生产环境时，切记要在安全组中，将Turms的8510端口设置为“仅内网访问”，以抵御不必要的公网攻击。",-1),p=(0,l._)("h2",{id:"接口设计准则",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#接口设计准则","aria-hidden":"true"},"#"),(0,l.Uk)(" 接口设计准则")],-1),f=(0,l.Uk)("为了让接口能够顾名思义，保证开发者能一目了然，Turms的Admin API接口设计在"),b={href:"https://en.wikipedia.org/wiki/Representational_state_transfer",target:"_blank",rel:"noopener noreferrer"},y=(0,l.Uk)("RESTful"),m=(0,l.Uk)("风格的基础上做了进一步优化与统一，具体遵循以下准则："),x=(0,l.uE)('<ul><li>URL的路径部分代表目标资源（如<code>/users/relationships</code>），或是资源的表现形式（如<code>/users/relationships/page</code>表示以分页的形式返回资源。一个URI有且仅可能返回一种格式的Response）</li><li>POST方法用于Create资源，DELETE方法用于Delete资源，PUT方法用于Update资源，GET方法用于Query资源，以及比较特殊的HEAD方法用于Check资源（类似于GET，但无Response body，仅通过HTTP状态码交互）</li><li>请求的Query string用于定位资源，如<code>?ids=1,2,3</code>；或是附加指令，如<code>?reset=true</code></li><li>请求的Body用于描述要创建或更新的数据</li></ul><h2 id="使用管理接口的对象" tabindex="-1"><a class="header-anchor" href="#使用管理接口的对象" aria-hidden="true">#</a> 使用管理接口的对象</h2>',2),k=(0,l._)("li",null,[(0,l._)("p",null,"您的前端管理系统或后端服务端发出HTTP(S)请求进行调用")],-1),C=(0,l.Uk)("作为内容统计管理系统与集群监控管理系统的"),U={href:"https://github.com/turms-im/turms/tree/develop/turms-admin",target:"_blank",rel:"noopener noreferrer"},_=(0,l.Uk)("turms-admin"),P=(0,l.Uk)("使用"),T=(0,l.uE)('<p>注意：管理接口不是给终端用户使用的，而是您团队内部进行调用的。因此通常情况下，您不需要给turms-service服务端开放外网IP与端口。</p><h2 id="类别" tabindex="-1"><a class="header-anchor" href="#类别" aria-hidden="true">#</a> 类别</h2><h3 id="非业务相关类" tabindex="-1"><a class="header-anchor" href="#非业务相关类" aria-hidden="true">#</a> 非业务相关类</h3><h4 id="监控类" tabindex="-1"><a class="header-anchor" href="#监控类" aria-hidden="true">#</a> 监控类</h4><table><thead><tr><th style="text-align:left;"><strong>种类</strong></th><th style="text-align:left;"><strong>Controller</strong></th><th>路径</th></tr></thead><tbody><tr><td style="text-align:left;">度量信息管理</td><td style="text-align:left;">MetricsController</td><td>/metrics</td></tr></tbody></table><h4 id="管理员类" tabindex="-1"><a class="header-anchor" href="#管理员类" aria-hidden="true">#</a> 管理员类</h4><table><thead><tr><th style="text-align:left;"><strong>种类</strong></th><th style="text-align:left;"><strong>Controller</strong></th><th>路径</th><th><strong>补充</strong></th></tr></thead><tbody><tr><td style="text-align:left;">管理员管理</td><td style="text-align:left;">AdminController</td><td>/admins</td><td>每个Turms集群默认存在一个角色为<code>ROOT</code>，账号名与密码均为<code>turms</code>的账号</td></tr><tr><td style="text-align:left;">管理员角色管理</td><td style="text-align:left;">AdminRoleController</td><td>/admins/roles</td><td>每个Turms集群默认存在一个角色为<code>ROOT</code>的超级管理员角色，其具有所有权限</td></tr></tbody></table><h4 id="集群类" tabindex="-1"><a class="header-anchor" href="#集群类" aria-hidden="true">#</a> 集群类</h4><table><thead><tr><th style="text-align:left;"><strong>种类</strong></th><th style="text-align:left;"><strong>Controller</strong></th><th>路径</th></tr></thead><tbody><tr><td style="text-align:left;">集群节点管理</td><td style="text-align:left;">MemberController</td><td>/cluster/members</td></tr><tr><td style="text-align:left;">集群配置管理</td><td style="text-align:left;">SettingController</td><td>/cluster/settings</td></tr></tbody></table><h4 id="黑名单类" tabindex="-1"><a class="header-anchor" href="#黑名单类" aria-hidden="true">#</a> 黑名单类</h4><table><thead><tr><th style="text-align:left;"><strong>种类</strong></th><th style="text-align:left;"><strong>Controller</strong></th><th>路径</th></tr></thead><tbody><tr><td style="text-align:left;">IP黑名单管理</td><td style="text-align:left;">IpBlocklistController</td><td>/blocked-clients/ips</td></tr><tr><td style="text-align:left;">用户黑名单管理</td><td style="text-align:left;">UserBlocklistController</td><td>/blocked-clients/users</td></tr></tbody></table><h3 id="业务相关类" tabindex="-1"><a class="header-anchor" href="#业务相关类" aria-hidden="true">#</a> 业务相关类</h3><h4 id="用户类" tabindex="-1"><a class="header-anchor" href="#用户类" aria-hidden="true">#</a> 用户类</h4><table><thead><tr><th style="text-align:left;"><strong>职责</strong></th><th style="text-align:left;"><strong>Controller</strong></th><th>路径</th></tr></thead><tbody><tr><td style="text-align:left;">用户信息管理</td><td style="text-align:left;">UserController</td><td>/users</td></tr><tr><td style="text-align:left;">用户在线状态管理</td><td style="text-align:left;">UserOnlineInfoController</td><td>/users/online-infos</td></tr><tr><td style="text-align:left;">用户权限组管理</td><td style="text-align:left;">UserPermissionGroupController</td><td>/users/permission-groups</td></tr><tr><td style="text-align:left;">用户关系管理</td><td style="text-align:left;">UserRelationshipController</td><td>/users/relationships</td></tr><tr><td style="text-align:left;">用户关系组管理</td><td style="text-align:left;">UserRelationshipGroupController</td><td>/users/relationships/groups</td></tr><tr><td style="text-align:left;">用户好友请求管理</td><td style="text-align:left;">UserFriendRequestController</td><td>/users/relationships/friend-requests</td></tr></tbody></table><h4 id="群组类" tabindex="-1"><a class="header-anchor" href="#群组类" aria-hidden="true">#</a> 群组类</h4><table><thead><tr><th>职责</th><th>Controller</th><th>路径</th></tr></thead><tbody><tr><td>群组管理</td><td>GroupController</td><td>/groups</td></tr><tr><td>群组类型管理</td><td>GroupTypeController</td><td>/groups/types</td></tr><tr><td>群组入群问题管理</td><td>GroupQuestionController</td><td>/groups/questions</td></tr><tr><td>群组成员管理</td><td>GroupMemberController</td><td>/groups/members</td></tr><tr><td>群组黑名单管理</td><td>GroupBlocklistController</td><td>/groups/blocked-users</td></tr><tr><td>群组邀请管理</td><td>GroupInvitationController</td><td>/groups/invitations</td></tr><tr><td>群组入群请求管理</td><td>GroupJoinRequestController</td><td>/groups/join-requests</td></tr></tbody></table><h4 id="会话类" tabindex="-1"><a class="header-anchor" href="#会话类" aria-hidden="true">#</a> 会话类</h4><table><thead><tr><th>职责</th><th>Controller</th><th>路径</th></tr></thead><tbody><tr><td>会话管理</td><td>ConversationController</td><td>/conversations</td></tr></tbody></table><h4 id="消息类" tabindex="-1"><a class="header-anchor" href="#消息类" aria-hidden="true">#</a> 消息类</h4><table><thead><tr><th>职责</th><th>Controller</th><th>路径</th></tr></thead><tbody><tr><td>消息管理</td><td>MessageController</td><td>/messages</td></tr></tbody></table><h2 id="统计" tabindex="-1"><a class="header-anchor" href="#统计" aria-hidden="true">#</a> 统计</h2>',21),I=(0,l.Uk)("当前对外暴露的统计相关接口多为Legacy API，不推荐使用。我们会在之后对其进行调整与重构。具体原因请查阅"),v={href:"https://turms-im.github.io/docs/for-developers/data-analytics.html",target:"_blank",rel:"noopener noreferrer"},A=(0,l.Uk)("数据分析"),R=(0,l.Uk)("章节。"),G={},O=(0,r(3744).Z)(G,[["render",function(t,e){const r=(0,l.up)("OutboundLink");return(0,l.wg)(),(0,l.iD)(l.HY,null,[d,(0,l._)("p",null,[a,(0,l._)("a",n,[s,(0,l.Wm)(r)]),o,(0,l._)("a",i,[h,(0,l.Wm)(r)]),u]),g,c,p,(0,l._)("p",null,[f,(0,l._)("a",b,[y,(0,l.Wm)(r)]),m]),x,(0,l._)("ul",null,[k,(0,l._)("li",null,[(0,l._)("p",null,[C,(0,l._)("a",U,[_,(0,l.Wm)(r)]),P])])]),T,(0,l._)("p",null,[I,(0,l._)("a",v,[A,(0,l.Wm)(r)]),R])],64)}]])},3744:(t,e)=>{e.Z=(t,e)=>{for(const[r,l]of e)t[r]=l;return t}},2595:(t,e,r)=>{r.r(e),r.d(e,{data:()=>l});const l={key:"v-5e959c46",path:"/for-developers/admin-api.html",title:"管理员API接口",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"接口设计准则",slug:"接口设计准则",children:[]},{level:2,title:"使用管理接口的对象",slug:"使用管理接口的对象",children:[]},{level:2,title:"类别",slug:"类别",children:[{level:3,title:"非业务相关类",slug:"非业务相关类",children:[]},{level:3,title:"业务相关类",slug:"业务相关类",children:[]}]},{level:2,title:"统计",slug:"统计",children:[]}],filePathRelative:"for-developers/admin-api.md",git:{updatedTime:1641116406e3}}}}]);