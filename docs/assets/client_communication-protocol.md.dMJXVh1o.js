import{_ as e,c as o,o as t,V as a}from"./chunks/framework.fogKwqBf.js";const b=JSON.parse('{"title":"Communication Protocol Used Between Client and Server","description":"","frontmatter":{},"headers":[],"relativePath":"client/communication-protocol.md","filePath":"client/communication-protocol.md"}'),n={name:"client/communication-protocol.md"},r=a('<h1 id="communication-protocol-used-between-client-and-server" tabindex="-1">Communication Protocol Used Between Client and Server <a class="header-anchor" href="#communication-protocol-used-between-client-and-server" aria-label="Permalink to &quot;Communication Protocol Used Between Client and Server&quot;">​</a></h1><h2 id="data-format" tabindex="-1">Data Format <a class="header-anchor" href="#data-format" aria-label="Permalink to &quot;Data Format&quot;">​</a></h2><p>For general requests and responses:</p><ul><li>Client based on the pure TCP protocol: varint-encoded payload length + payload (Protobuf-encoded <code>TurmsNotification</code> or <code>TurmsRequest</code>).</li><li>Client based on the WebSocket protocol: payload (Protobuf-encoded <code>TurmsNotification</code> or <code>TurmsRequest</code>). The byte length of the payload is transmitted through the underlying WebSocket frame.</li></ul><p>For heartbeat requests:</p><ul><li>Client based on the pure TCP protocol: a byte array <code>[0]</code> with the length of one byte. The value <code>0</code> here actually means &quot;the length of the payload is 0 with a length of one byte under varint encoding&quot;, that is, the payload is 0 bytes.</li><li>Client based on the WebSocket protocol: a binary message with an empty body (0 bytes).</li></ul><p>Note: The reasons why Turms does not implement heartbeat through WebSocket&#39;s PING/PONG are:</p><ul><li>The time interval for sending PING frames implemented by each browser&#39;s WebSocket is different.</li><li>The upper layer code cannot control the behavior of PING/PONG, or even perceive the occurrence of the behavior.</li><li>The heartbeat logic at the network level should not be coupled with the heartbeat at the application layer.</li></ul>',8),i=[r];function c(l,d,s,h,u,m){return t(),o("div",null,i)}const f=e(n,[["render",c]]);export{b as __pageData,f as default};
