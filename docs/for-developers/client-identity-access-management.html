<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>身份与访问管理 | Turms Documentation</title><meta name="description" content="">
    <link rel="modulepreload" href="/docs/assets/app.840e6db2.js"><link rel="modulepreload" href="/docs/assets/client-identity-access-management.html.658e37f5.js"><link rel="modulepreload" href="/docs/assets/client-identity-access-management.html.16436929.js"><link rel="prefetch" href="/docs/assets/index.html.eff772f1.js"><link rel="prefetch" href="/docs/assets/index.html.7fe21920.js"><link rel="prefetch" href="/docs/assets/index.html.aa1dcd45.js"><link rel="prefetch" href="/docs/assets/group.html.9b648c7f.js"><link rel="prefetch" href="/docs/assets/message.html.8dc0050d.js"><link rel="prefetch" href="/docs/assets/simultaneous-login.html.927f142f.js"><link rel="prefetch" href="/docs/assets/user.html.af9e4f39.js"><link rel="prefetch" href="/docs/assets/admin-api.html.2fa78bb9.js"><link rel="prefetch" href="/docs/assets/anti-spam.html.45803589.js"><link rel="prefetch" href="/docs/assets/architecture.html.dbbb1ef2.js"><link rel="prefetch" href="/docs/assets/chatbot.html.f835c7e7.js"><link rel="prefetch" href="/docs/assets/client-api.html.d0e93dd5.js"><link rel="prefetch" href="/docs/assets/client-metrics.html.be2f9156.js"><link rel="prefetch" href="/docs/assets/client-quick-start.html.d1e77d25.js"><link rel="prefetch" href="/docs/assets/client-requirements.html.453e7169.js"><link rel="prefetch" href="/docs/assets/client-server-protocol.html.00dee417.js"><link rel="prefetch" href="/docs/assets/client-session.html.cb376e9a.js"><link rel="prefetch" href="/docs/assets/client-turms-client-js.html.1d6dbd30.js"><link rel="prefetch" href="/docs/assets/cluster.html.5d2ce6ae.js"><link rel="prefetch" href="/docs/assets/code.html.f467d647.js"><link rel="prefetch" href="/docs/assets/config.html.3ceb62dd.js"><link rel="prefetch" href="/docs/assets/data-analytics.html.f97c00a7.js"><link rel="prefetch" href="/docs/assets/distribution.html.6fc53c11.js"><link rel="prefetch" href="/docs/assets/getting-started.html.8daca426.js"><link rel="prefetch" href="/docs/assets/observability.html.6875589e.js"><link rel="prefetch" href="/docs/assets/plugin.html.deadd71a.js"><link rel="prefetch" href="/docs/assets/redevelopment.html.842a4a6b.js"><link rel="prefetch" href="/docs/assets/rules.html.7c53dfb3.js"><link rel="prefetch" href="/docs/assets/schema.html.c85c727a.js"><link rel="prefetch" href="/docs/assets/security.html.8b3514cf.js"><link rel="prefetch" href="/docs/assets/status-aware.html.ccee6ca3.js"><link rel="prefetch" href="/docs/assets/status-code.html.b1f8dede.js"><link rel="prefetch" href="/docs/assets/storage.html.3147dfbe.js"><link rel="prefetch" href="/docs/assets/system-resource-management.html.e4d4a4ff.js"><link rel="prefetch" href="/docs/assets/testing.html.b49054d3.js"><link rel="prefetch" href="/docs/assets/turms-admin.html.ccdab702.js"><link rel="prefetch" href="/docs/assets/404.html.c038a05a.js"><link rel="prefetch" href="/docs/assets/index.html.a7072475.js"><link rel="prefetch" href="/docs/assets/index.html.16213efa.js"><link rel="prefetch" href="/docs/assets/index.html.441f8573.js"><link rel="prefetch" href="/docs/assets/group.html.8a1bda22.js"><link rel="prefetch" href="/docs/assets/message.html.b5de0336.js"><link rel="prefetch" href="/docs/assets/simultaneous-login.html.8b6844c8.js"><link rel="prefetch" href="/docs/assets/user.html.bf0dbd7b.js"><link rel="prefetch" href="/docs/assets/admin-api.html.f5787b62.js"><link rel="prefetch" href="/docs/assets/anti-spam.html.61da8042.js"><link rel="prefetch" href="/docs/assets/architecture.html.4bb4ae91.js"><link rel="prefetch" href="/docs/assets/chatbot.html.29833035.js"><link rel="prefetch" href="/docs/assets/client-api.html.690eb7f7.js"><link rel="prefetch" href="/docs/assets/client-metrics.html.26e798f7.js"><link rel="prefetch" href="/docs/assets/client-quick-start.html.8ad0af8e.js"><link rel="prefetch" href="/docs/assets/client-requirements.html.92787140.js"><link rel="prefetch" href="/docs/assets/client-server-protocol.html.d3dffc3f.js"><link rel="prefetch" href="/docs/assets/client-session.html.bfbed58c.js"><link rel="prefetch" href="/docs/assets/client-turms-client-js.html.f97f3ca7.js"><link rel="prefetch" href="/docs/assets/cluster.html.853165f8.js"><link rel="prefetch" href="/docs/assets/code.html.507bf7fd.js"><link rel="prefetch" href="/docs/assets/config.html.c5c774a4.js"><link rel="prefetch" href="/docs/assets/data-analytics.html.0798bce1.js"><link rel="prefetch" href="/docs/assets/distribution.html.e71fb4fd.js"><link rel="prefetch" href="/docs/assets/getting-started.html.d2052ae8.js"><link rel="prefetch" href="/docs/assets/observability.html.214f428c.js"><link rel="prefetch" href="/docs/assets/plugin.html.7f3250b6.js"><link rel="prefetch" href="/docs/assets/redevelopment.html.a7b14226.js"><link rel="prefetch" href="/docs/assets/rules.html.7d5b76ec.js"><link rel="prefetch" href="/docs/assets/schema.html.19767c34.js"><link rel="prefetch" href="/docs/assets/security.html.9b0633e7.js"><link rel="prefetch" href="/docs/assets/status-aware.html.030a0813.js"><link rel="prefetch" href="/docs/assets/status-code.html.0d63c737.js"><link rel="prefetch" href="/docs/assets/storage.html.a9a9c080.js"><link rel="prefetch" href="/docs/assets/system-resource-management.html.5a795650.js"><link rel="prefetch" href="/docs/assets/testing.html.00f4b367.js"><link rel="prefetch" href="/docs/assets/turms-admin.html.89014698.js"><link rel="prefetch" href="/docs/assets/404.html.ea5280cf.js"><link rel="prefetch" href="/docs/assets/mermaid.esm.min.e3b5d21d.js">
    <link rel="stylesheet" href="/docs/assets/style.25523ee4.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/docs/" class=""><img class="logo" src="https://raw.githubusercontent.com/turms-im/assets/master/logo/pegion.svg" alt="Turms Documentation"><span class="site-name can-hide">Turms Documentation</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/turms-im/turms" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/turms-im/turms" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/docs/README.md" class="sidebar-item sidebar-heading" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a href="/docs/community/README.md" class="sidebar-item sidebar-heading" aria-label="社区常见问题"><!--[--><!--]--> 社区常见问题 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">业务功能 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/features/" class="sidebar-item" aria-label="业务功能介绍"><!--[--><!--]--> 业务功能介绍 <!--[--><!--]--></a><!----></li><li><a href="/docs/features/simultaneous-login.html" class="sidebar-item" aria-label="多端登录"><!--[--><!--]--> 多端登录 <!--[--><!--]--></a><!----></li><li><a href="/docs/features/user.html" class="sidebar-item" aria-label="用户相关功能"><!--[--><!--]--> 用户相关功能 <!--[--><!--]--></a><!----></li><li><a href="/docs/features/group.html" class="sidebar-item" aria-label="群组相关功能"><!--[--><!--]--> 群组相关功能 <!--[--><!--]--></a><!----></li><li><a href="/docs/features/message.html" class="sidebar-item" aria-label="消息相关功能"><!--[--><!--]--> 消息相关功能 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">服务端指南 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">部署 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/for-developers/getting-started.html" class="sidebar-item" aria-label="搭建与启动"><!--[--><!--]--> 搭建与启动 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/distribution.html" class="sidebar-item" aria-label="发布"><!--[--><!--]--> 发布 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/config.html" class="sidebar-item" aria-label="配置参数"><!--[--><!--]--> 配置参数 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">设计 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/for-developers/architecture.html" class="sidebar-item" aria-label="架构设计"><!--[--><!--]--> 架构设计 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/schema.html" class="sidebar-item" aria-label="集合结构设计"><!--[--><!--]--> 集合结构设计 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/status-aware.html" class="sidebar-item" aria-label="状态感知"><!--[--><!--]--> 状态感知 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">开发 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/for-developers/redevelopment.html" class="sidebar-item" aria-label="关于二次开发"><!--[--><!--]--> 关于二次开发 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/rules.html" class="sidebar-item" aria-label="开发基本规约"><!--[--><!--]--> 开发基本规约 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/plugin.html" class="sidebar-item" aria-label="自定义插件"><!--[--><!--]--> 自定义插件 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/code.html" class="sidebar-item" aria-label="源码"><!--[--><!--]--> 源码 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/testing.html" class="sidebar-item" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">主要模块 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/for-developers/cluster.html" class="sidebar-item" aria-label="集群的设计与实现"><!--[--><!--]--> 集群的设计与实现 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/system-resource-management.html" class="sidebar-item" aria-label="系统资源管理"><!--[--><!--]--> 系统资源管理 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/observability.html" class="sidebar-item" aria-label="可观测性体系"><!--[--><!--]--> 可观测性体系 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/security.html" class="sidebar-item" aria-label="安全"><!--[--><!--]--> 安全 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/storage.html" class="sidebar-item" aria-label="存储服务"><!--[--><!--]--> 存储服务 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/chatbot.html" class="sidebar-item" aria-label="聊天机器人"><!--[--><!--]--> 聊天机器人 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/anti-spam.html" class="sidebar-item" aria-label="敏感词过滤"><!--[--><!--]--> 敏感词过滤 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/data-analytics.html" class="sidebar-item" aria-label="数据分析"><!--[--><!--]--> 数据分析 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">客户端指南 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/for-developers/client-quick-start.html" class="sidebar-item" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/client-requirements.html" class="sidebar-item" aria-label="版本要求"><!--[--><!--]--> 版本要求 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/client-api.html" class="sidebar-item" aria-label="接口"><!--[--><!--]--> 接口 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/client-session.html" class="sidebar-item" aria-label="会话的生命周期"><!--[--><!--]--> 会话的生命周期 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/client-metrics.html" class="sidebar-item" aria-label="度量数据"><!--[--><!--]--> 度量数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/for-developers/client-identity-access-management.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="身份与访问管理"><!--[--><!--]--> 身份与访问管理 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/for-developers/client-identity-access-management.html#登陆的认证与授权" class="router-link-active router-link-exact-active sidebar-item" aria-label="登陆的认证与授权"><!--[--><!--]--> 登陆的认证与授权 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/for-developers/client-identity-access-management.html#相关配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="相关配置"><!--[--><!--]--> 相关配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/for-developers/client-identity-access-management.html#内置的身份与访问管理机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="内置的身份与访问管理机制"><!--[--><!--]--> 内置的身份与访问管理机制 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/for-developers/client-identity-access-management.html#基于插件的自定义身份与访问管理实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="基于插件的自定义身份与访问管理实现"><!--[--><!--]--> 基于插件的自定义身份与访问管理实现 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/for-developers/client-identity-access-management.html#业务逻辑的认证与授权" class="router-link-active router-link-exact-active sidebar-item" aria-label="业务逻辑的认证与授权"><!--[--><!--]--> 业务逻辑的认证与授权 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/docs/for-developers/client-server-protocol.html" class="sidebar-item" aria-label="与服务端通信时使用的数据格式"><!--[--><!--]--> 与服务端通信时使用的数据格式 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/client-turms-client-js.html" class="sidebar-item" aria-label="turms-client-js共享上下文"><!--[--><!--]--> turms-client-js共享上下文 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/docs/for-developers/turms-admin.html" class="sidebar-item sidebar-heading" aria-label="turms-admin"><!--[--><!--]--> turms-admin <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">手册 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/docs/for-developers/admin-api.html" class="sidebar-item" aria-label="管理员API接口"><!--[--><!--]--> 管理员API接口 <!--[--><!--]--></a><!----></li><li><a href="/docs/for-developers/status-code.html" class="sidebar-item" aria-label="状态码"><!--[--><!--]--> 状态码 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="身份与访问管理" tabindex="-1"><a class="header-anchor" href="#身份与访问管理" aria-hidden="true">#</a> 身份与访问管理</h1><h2 id="登陆的认证与授权" tabindex="-1"><a class="header-anchor" href="#登陆的认证与授权" aria-hidden="true">#</a> 登陆的认证与授权</h2><p>Turms既提供了内置的身份与访问管理机制，也支持用户基于插件自定义身份与访问管理实现。</p><h3 id="相关配置" tabindex="-1"><a class="header-anchor" href="#相关配置" aria-hidden="true">#</a> 相关配置</h3><table><thead><tr><th>配置名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>turms.gateway.session.identity-access-management.enabled</td><td>true</td><td>是否开启身份与访问管理机制。<br>如果该值为<code>false</code>，则关闭Turms内置的身份与访问管理机制与用户基于插件自定义身份与访问管理实现，并允许任意用户登陆，与授权其发送任意请求类型</td></tr><tr><td>turms.gateway.session.identity-access-management.type</td><td>password</td><td>使用的Turms内置身份与访问管理机制类型，其类型可以为<code>noop</code>、<code>password</code>、<code>jwt</code>、<code>http</code>。具体见下文</td></tr></tbody></table><h3 id="内置的身份与访问管理机制" tabindex="-1"><a class="header-anchor" href="#内置的身份与访问管理机制" aria-hidden="true">#</a> 内置的身份与访问管理机制</h3><h4 id="_1-noop" tabindex="-1"><a class="header-anchor" href="#_1-noop" aria-hidden="true">#</a> 1. NOOP</h4><p>关闭内置的身份与访问管理机制，并允许任意用户登陆，与授权其发送任意请求类型。</p><h5 id="相关配置项" tabindex="-1"><a class="header-anchor" href="#相关配置项" aria-hidden="true">#</a> 相关配置项</h5><ul><li>turms.gateway.session.identity-access-management.type=noop</li></ul><h4 id="_2-基于密钥认证" tabindex="-1"><a class="header-anchor" href="#_2-基于密钥认证" aria-hidden="true">#</a> 2. 基于密钥认证</h4><p>基于Turms服务端自建的MongoDB中的<code>user</code>集合中的密码做用户认证。暂不支持授权实现。</p><h5 id="相关配置项-1" tabindex="-1"><a class="header-anchor" href="#相关配置项-1" aria-hidden="true">#</a> 相关配置项</h5><ul><li>turms.gateway.session.identity-access-management.type=password</li></ul><h4 id="_3-基于jwt认证" tabindex="-1"><a class="header-anchor" href="#_3-基于jwt认证" aria-hidden="true">#</a> 3. 基于JWT认证</h4><p>JWT令牌中包含了该用户的认证与授权信息。</p><h5 id="工作流程" tabindex="-1"><a class="header-anchor" href="#工作流程" aria-hidden="true">#</a> 工作流程</h5><div class="md-enhance-mermaid loading"><svg xmlns="http://www.w3.org/2000/svg" class="icon loading-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="loading icon"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="0s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="0s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.333s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.333s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.667s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.667s"></animate></circle></svg></div><ul><li>客户端应用向您的服务端申请JWT令牌</li><li>客户端应用拿到JWT令牌后，通过Turms客户端登陆接口<code>turmsClient.userService.login</code>中的<code>password</code>字段将JWT字符串发送给turms-gateway服务端</li><li>turms-gateway服务端拿到JWT令牌后，根据JWT令牌中指定的算法与开发者在turms-gateway服务端配置的公钥配置（非对称加密算法：RS256、RS384、RS512、PS256、PS384、PS512、ES256、ES384、ES512）或私钥配置（对称加密算法：HS256、HS384、HS512）对JWT令牌进行校验。</li><li>如果开发者未在turms-gateway服务端配置JWT指定的算法密钥配置，则向客户端返回对应的错误信息，以告知客户端该算法不被支持</li><li>如果JWT令牌校验通过，则根据JWT令牌的认证与授权信息对用户进行认证与授权</li><li>如果JWT令牌校验失败，则向客户端返回对应的错误信息</li></ul><h5 id="jwt正文-payload-格式" tabindex="-1"><a class="header-anchor" href="#jwt正文-payload-格式" aria-hidden="true">#</a> JWT正文（Payload）格式</h5><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;iss&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token comment">// issuer</span>
    <span class="token property">&quot;sub&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token comment">// subject</span>
    <span class="token property">&quot;aud&quot;</span><span class="token operator">:</span> array&lt;string&gt;<span class="token punctuation">,</span> <span class="token comment">// audience</span>
    <span class="token property">&quot;exp&quot;</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token comment">// expiration time</span>
    <span class="token string">&quot;nbf&quot;</span><span class="token punctuation">,</span> number<span class="token punctuation">,</span> <span class="token comment">// not before</span>

    <span class="token property">&quot;authenticated&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;statements&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ALLOW&quot;</span><span class="token punctuation">,</span> <span class="token comment">// or &quot;DENY&quot;</span>
        <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token comment">// a string of [&quot;*&quot;, &quot;CREATE&quot;, &quot;DELETE&quot;, &quot;UPDATE&quot;, &quot;QUERY&quot;], or an array that contains these strings</span>
        <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span> <span class="token comment">// a string of [&quot;*&quot;, &quot;USER&quot;, &quot;GROUP_BLOCKED_USER&quot;, ...], or an array that contains these strings</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中：</p><ul><li><p><code>iss</code>、<code>sub</code>、<code>aud</code>、<code>exp</code>与<code>nbf</code>这五个JWT公共声明可用于JWT校验，除<code>sub</code>声明必须存在外，其余四个声明均可以不存在，即不做声明相关的逻辑校验。</p><ul><li><p><code>iss</code>（issuer）：JWT的签发者，如<code>www.my-server.com</code>。可配合配置项<code>turms.gateway.session.identity-access-management.jwt.verification.issuer</code>做校验。</p></li><li><p><code>sub</code>（subject）：JWT所签发给的用户，如<code>123456789</code>。该字段必须与用户的登陆用户ID相同。</p></li><li><p><code>aud</code>（audience）: JWT的接收方，如<code>www.my-turms.com</code>。可配合配置项<code>turms.gateway.session.identity-access-management.jwt.verification.audience</code>做校验。</p></li><li><p><code>exp</code>（expiration time）：JWT的过期时间，如<code>1600000000</code>。在该时间之后，该JWT是无效的。</p></li><li><p><code>nbf</code>（not before）：在该时间之前，该JWT是无效的，如<code>1600000000</code>。</p></li></ul></li><li><p><code>authenticated</code>：私有布尔声明，表示该用户是否通过认证，为<code>true</code>（注意：该<code>true</code>既可以是布尔值，也可以是字符串）时则表示通过认证，反之则没通过。</p></li><li><p><code>statements</code>：私有数组声明，表示该用户拥有的权限，数组长度最大为100。</p><ul><li><p><code>effect</code>字段可以是<code>ALLOW</code>表示“允许的权限”，或<code>DENY</code>表示“禁止的权限”。被<code>DENY</code>禁止的权限生效优先级始终高于被<code>ALLOW</code>允许的权限，而不会受<code>statements</code>申明顺序的影响。</p><p><code>DENY</code>通常配合<code>ALLOW</code>一起使用，如权限“除了CREATE USER与GROUP_BLOCKED_USER资源的权限被禁止，其他权限都被允许”：</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DENY&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CREATE&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;USER&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GROUP_BLOCKED_USER&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>，<span class="token punctuation">{</span>
    <span class="token property">&quot;effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ALLOW&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>actions</code>字段表示授权的行为，其值既可以是下述字符串，也可以是包含下述字符串的数组，如<code>[&quot;CREATE&quot;, &quot;DELETE&quot;]</code>：</p><ul><li><code>*</code>：所有行为</li><li><code>CREATE</code>：创建行为</li><li><code>DELETE</code>：删除行为</li><li><code>UPDATE</code>：更新行为</li><li><code>QUERY</code>：查询行为</li></ul></li><li><p><code>resources</code>字段表示授权的资源（即该用户是否有权限发送这些资源相关的请求），其值既可以是下述字符串，也可以是包含下述字符串的数组，如<code>[&quot;USER&quot;, &quot;MESSAGE&quot;]</code>：</p><ul><li><code>*</code>：所有资源</li><li><code>USER</code>：用户数据相关资源</li><li><code>USER_LOCATION</code>：用户位置相关资源</li><li><code>USER_ONLINE_STATUS</code>：用户在线状态相关资源</li><li><code>USER_PROFILE</code>：用户个人信息相关资源</li><li><code>NEARBY_USER</code>：附近的用户相关资源</li><li><code>RELATIONSHIP</code>：用户关系相关资源</li><li><code>RELATIONSHIP_GROUP</code>：用户关系组相关资源</li><li><code>FRIEND_REQUEST</code>：好友请求相关资源</li><li><code>GROUP</code>：群信息相关资源</li><li><code>GROUP_BLOCKED_USER</code>：群封禁用户相关资源</li><li><code>GROUP_INVITATION</code>：群邀请相关资源</li><li><code>GROUP_JOIN_QUESTION</code>：进群问题相关资源</li><li><code>GROUP_JOIN_QUESTION_ANSWER</code>：进群问题答案相关资源</li><li><code>GROUP_JOIN_REQUEST</code>：进群请求相关资源</li><li><code>GROUP_MEMBER</code>：群成员相关资源</li><li><code>JOINED_GROUP</code>：已加入的群相关资源</li><li><code>MESSAGE</code>：消息相关资源</li><li><code>CONVERSATION</code>：会话相关资源</li><li><code>TYPING_STATUS</code>：输入状态相关资源</li><li><code>RESOURCE</code>：存储资源相关资源</li></ul></li></ul></li></ul><h5 id="相关配置项-2" tabindex="-1"><a class="header-anchor" href="#相关配置项-2" aria-hidden="true">#</a> 相关配置项</h5><table><thead><tr><th>配置名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>turms.gateway.session.identity-access-management.type</td><td>password</td><td>设置为<code>jwt</code>以开启基于JWT的身份与访问管理机制</td></tr><tr><td>turms.service.message.check-if-target-active-and-not-deleted</td><td>true</td><td>使用<code>JWT</code>机制时，需要将该配置项设置成<code>false</code>，否则因为Turms的数据库中并不存在该用户，因此用户将无法发送消息</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.verification.issuer</td><td></td><td>该值不为空时，校验JWT的签发者是否等同于该值</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.verification.audience</td><td></td><td>该值不为空时，校验JWT的接收方是否包含该值</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.verification.custom-payload-claims</td><td></td><td>该值不为空时，校验JWT中的私有声明是否与该值匹配</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.authentication.expectation.custom-payload-claims</td><td>{ &quot;authenticated&quot;: true }</td><td>在JWT的私有声明中匹配该值，如果匹配成功，则表明该用户已被认证</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.hmac256.file-path</td><td></td><td>密钥文件路径。开发者只用配置该密钥或下文的P12中的一组</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.hmac256.p12.file-path</td><td></td><td>PKCS#12文件路径</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.hmac256.p12.password</td><td></td><td>PKCS#12密钥</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.hmac256.p12.key-alias</td><td></td><td>密钥别名</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.hmac256.p12.key-password</td><td></td><td>密钥密码。为空时，默认等同于PKCS#12密钥</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.rsa256.pem-file-path</td><td></td><td>PEM文件路径。开发者只用配置该PEM或下文的P12中的一组</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.rsa256.p12.file-path</td><td></td><td>PKCS#12文件路径</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.rsa256.p12.password</td><td></td><td>PKCS#12密钥</td></tr><tr><td>turms.gateway.session.identity-access-management.jwt.algorithm.rsa256.p12.key-alias</td><td></td><td>公钥别名</td></tr><tr><td>rsa384/rsa512/ps256/ps384/ps512/ecdsa256/ecdsa384/ecdsa512的配置与上述的<code>rsa256</code>一样</td><td></td><td></td></tr></tbody></table><h4 id="_4-基于外部http响应的身份与访问管理机制" tabindex="-1"><a class="header-anchor" href="#_4-基于外部http响应的身份与访问管理机制" aria-hidden="true">#</a> 4. 基于外部HTTP响应的身份与访问管理机制</h4><p>HTTP响应中包含了该用户的认证与授权信息。</p><h5 id="工作流程-1" tabindex="-1"><a class="header-anchor" href="#工作流程-1" aria-hidden="true">#</a> 工作流程</h5><div class="md-enhance-mermaid loading"><svg xmlns="http://www.w3.org/2000/svg" class="icon loading-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="loading icon"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="0s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="0s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.333s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.333s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.667s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.667s"></animate></circle></svg></div><ul><li><p>客户端通过Turms客户端登陆接口<code>turmsClient.userService.login</code>向turms-gateway服务端发送登陆请求</p></li><li><p>turms-gateway服务端会向您的HTTP服务端发送HTTP请求，且请求正文格式为：</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;userId&quot;</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token property">&quot;loggingInDeviceType&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token property">&quot;deviceDetails&quot;</span><span class="token operator">:</span> object<span class="token punctuation">,</span>
    <span class="token property">&quot;userStatus&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>您的HTTP服务端按照下文的“HTTP响应格式”返回该用户的认证与授权信息</p></li><li><p>turms-gateway根据该HTTP响应对用户进行认证与授权</p></li></ul><h5 id="http响应格式" tabindex="-1"><a class="header-anchor" href="#http响应格式" aria-hidden="true">#</a> HTTP响应格式</h5><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;authenticated&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;statements&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ALLOW&quot;</span><span class="token punctuation">,</span> <span class="token comment">// or &quot;DENY&quot;</span>
        <span class="token property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token comment">// a string of [&quot;*&quot;, &quot;CREATE&quot;, &quot;DELETE&quot;, &quot;UPDATE&quot;, &quot;QUERY&quot;], or an array that contains these strings</span>
        <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span> <span class="token comment">// a string of [&quot;*&quot;, &quot;USER&quot;, &quot;GROUP_BLOCKED_USER&quot;, ...], or an array that contains these strings</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>authenticated</code>与<code>statements</code>两个字段的含义与上文JWT正文中对应声明的含义相同，故不赘述。</p><h5 id="相关配置项-3" tabindex="-1"><a class="header-anchor" href="#相关配置项-3" aria-hidden="true">#</a> 相关配置项</h5><table><thead><tr><th>配置名</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>turms.gateway.session.identity-access-management.type</td><td>password</td><td>设置为<code>http</code>以开启基于外部HTTP响应的身份与访问管理机制</td></tr><tr><td>turms.service.message.check-if-target-active-and-not-deleted</td><td>true</td><td>使用<code>HTTP</code>机制时，需要将该配置项设置成<code>false</code>，否则因为Turms的数据库中并不存在该用户，因此用户将无法发送消息</td></tr><tr><td>turms.gateway.session.identity-access-management.http.request.url</td><td>&quot;&quot;</td><td>请求URL</td></tr><tr><td>turms.gateway.session.identity-access-management.http.request.headers</td><td>true</td><td>附加的请求头</td></tr><tr><td>turms.gateway.session.identity-access-management.http.request.http-method</td><td>GET</td><td>请求方法</td></tr><tr><td>turms.gateway.session.identity-access-management.http.request.timeout-millis</td><td>30000</td><td>请求超时时长</td></tr><tr><td>turms.gateway.session.identity-access-management.http.authentication.response-expectation.status-codes</td><td>&quot;2??&quot;</td><td>在响应状态码中匹配该值，如果匹配成功，则继续进行其他匹配，否则认证失败</td></tr><tr><td>turms.gateway.session.identity-access-management.http.authentication.response-expectation.headers</td><td></td><td>在响应头中匹配该值，如果匹配成功，则继续进行其他匹配，否则认证失败</td></tr><tr><td>turms.gateway.session.identity-access-management.http.authentication.response-expectation.body-fields</td><td>{ &quot;authenticated&quot;: true }</td><td>在响应正文中匹配该值，如果匹配成功，则继续进行其他匹配，否则认证失败</td></tr></tbody></table><h3 id="基于插件的自定义身份与访问管理实现" tabindex="-1"><a class="header-anchor" href="#基于插件的自定义身份与访问管理实现" aria-hidden="true">#</a> 基于插件的自定义身份与访问管理实现</h3><p>认证插件接口：<code>im.turms.gateway.infra.plugin.extension.UserAuthenticator</code></p><p>授权插件接口：TODO</p><p>读者可以参考<a href="https://turms-im.github.io/docs/for-developers/plugin.html#%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">插件实现<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，实现上述插件接口。</p><h2 id="业务逻辑的认证与授权" tabindex="-1"><a class="header-anchor" href="#业务逻辑的认证与授权" aria-hidden="true">#</a> 业务逻辑的认证与授权</h2><p>对于客户端发来的权限信息，Turms服务端的态度是“客户端传来的权限信息均不可信”，因此Turms服务端会根据您在Turms服务端处所设定的业务配置，自行做各种必要的权限判断。</p><p>以“修改已发送消息”功能为例，该行为会触发一系列判定逻辑。Turms会先判断目标消息是否确实是由该用户发出的，再根据您在Turms服务端配置的<code>allowEditMessageBySender</code>（默认为true），来判断是否允许用户修改已发送消息，若您设置其为false，则在客户端处会捕获到一个<code>ResponseException</code>（Kotlin）或<code>ResponseError</code>（JavaScript/Swift）对象，而它由业务状态码模型<code>ResponseStatusCode</code>表示（由<code>code</code>与<code>reason</code>描述信息组成）。</p><p>再比如对于一个“简单”的“发送消息”请求，Turms服务端就会判断该消息发送用户是否处于激活状态、是否设置了“允许发送消息给陌生人（非关系人）”、消息发送者是否在黑名单中。如果接收方是群组，那么消息发送者是否是群成员，并且是否处于禁言状态等等逻辑判断。而您仅仅只需调用一个<code>sendMessage(...)</code>接口即可。</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/turms-im/turms/edit/main/for-developers/client-identity-access-management.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/docs/for-developers/client-metrics.html" class="" aria-label="度量数据"><!--[--><!--]--> 度量数据 <!--[--><!--]--></a></span><span class="next"><a href="/docs/for-developers/client-server-protocol.html" class="" aria-label="与服务端通信时使用的数据格式"><!--[--><!--]--> 与服务端通信时使用的数据格式 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/docs/assets/app.840e6db2.js" defer></script>
  </body>
</html>
