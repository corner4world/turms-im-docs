<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <title>可观测性体系 | Turms Documentation</title><meta name="description" content="">
    <link rel="preload" href="/docs/assets/js/runtime~app.02ccf936.js" as="script"><link rel="preload" href="/docs/assets/css/styles.19645cb8.css" as="style"><link rel="preload" href="/docs/assets/js/567.2446e979.js" as="script"><link rel="preload" href="/docs/assets/js/app.97d818d5.js" as="script">
    <link rel="stylesheet" href="/docs/assets/css/styles.19645cb8.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/docs/" class=""><img class="logo" src="https://raw.githubusercontent.com/turms-im/assets/master/logo/pegion.svg" alt="Turms Documentation"><span class="site-name can-hide">Turms Documentation</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/turms-im/turms" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/turms-im/turms" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">介绍</p><ul class=""><li><!--[--><a href="/docs/intro/" class="nav-link sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/intro/features.html" class="nav-link sidebar-item" aria-label="特性"><!--[--><!--]--> 特性 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/intro/redevelopment.html" class="nav-link sidebar-item" aria-label="关于二次开发"><!--[--><!--]--> 关于二次开发 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">业务功能</p><ul class=""><li><!--[--><a href="/docs/features/" class="nav-link sidebar-item" aria-label="业务功能介绍"><!--[--><!--]--> 业务功能介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/features/simultaneous-login.html" class="nav-link sidebar-item" aria-label="多端登录"><!--[--><!--]--> 多端登录 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/features/user.html" class="nav-link sidebar-item" aria-label="用户相关功能"><!--[--><!--]--> 用户相关功能 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/features/group.html" class="nav-link sidebar-item" aria-label="群组相关功能"><!--[--><!--]--> 群组相关功能 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/features/message.html" class="nav-link sidebar-item" aria-label="消息相关功能"><!--[--><!--]--> 消息相关功能 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">开发者文档</p><ul class=""><li><!--[--><a href="/docs/for-developers/getting-started.html" class="nav-link sidebar-item" aria-label="搭建与启动"><!--[--><!--]--> 搭建与启动 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/distribution.html" class="nav-link sidebar-item" aria-label="发布"><!--[--><!--]--> 发布 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/config.html" class="nav-link sidebar-item" aria-label="配置参数"><!--[--><!--]--> 配置参数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/admin-api.html" class="nav-link sidebar-item" aria-label="管理员API接口"><!--[--><!--]--> 管理员API接口 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/client-api.html" class="nav-link sidebar-item" aria-label="客户端接口"><!--[--><!--]--> 客户端接口 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/status-code.html" class="nav-link sidebar-item" aria-label="状态码"><!--[--><!--]--> 状态码 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/custom-plugin.html" class="nav-link sidebar-item" aria-label="自定义插件"><!--[--><!--]--> 自定义插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/architecture.html" class="nav-link sidebar-item" aria-label="架构设计"><!--[--><!--]--> 架构设计 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/schema.html" class="nav-link sidebar-item" aria-label="集合结构设计"><!--[--><!--]--> 集合结构设计 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="可观测性体系"><!--[--><!--]--> 可观测性体系 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#度量" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="度量"><!--[--><!--]--> 度量 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#系统度量" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="系统度量"><!--[--><!--]--> 系统度量 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#应用度量" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="应用度量"><!--[--><!--]--> 应用度量 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#业务度量" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="业务度量"><!--[--><!--]--> 业务度量 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#日志" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="日志"><!--[--><!--]--> 日志 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#不使用json格式的原因" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="不使用JSON格式的原因"><!--[--><!--]--> 不使用JSON格式的原因 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#类别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="类别"><!--[--><!--]--> 类别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#采集与分析" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="采集与分析"><!--[--><!--]--> 采集与分析 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#链路追踪" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="链路追踪"><!--[--><!--]--> 链路追踪 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#作用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="作用"><!--[--><!--]--> 作用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#实现" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="实现"><!--[--><!--]--> 实现 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/docs/for-developers/observability.html#监控与报警" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="监控与报警"><!--[--><!--]--> 监控与报警 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/docs/for-developers/security.html" class="nav-link sidebar-item" aria-label="安全"><!--[--><!--]--> 安全 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/status-aware.html" class="nav-link sidebar-item" aria-label="状态感知"><!--[--><!--]--> 状态感知 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/for-developers/data-analytics.html" class="nav-link sidebar-item" aria-label="数据分析"><!--[--><!--]--> 数据分析 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="可观测性体系" tabindex="-1"><a class="header-anchor" href="#可观测性体系" aria-hidden="true">#</a> 可观测性体系</h1><p>为了实现系统的高可靠、让系统具备容量可预估与异常可排查（如检测DDoS攻击）的能力，系统的可观测性体系建设至关重要。一个服务端如果没有对可观测性体系提供支持，那无论其功能有多么丰富，也只是玩具项目。</p><p>并且，在可观测性体系下生成的衍生产物也是企业的一项重要资产，企业经营者如果无视可观测性体系的建设，就无法有效分析用户行为与喜好，经营策略的优化就更无从谈起，同时也意味着企业放弃了一笔可观的财富。</p><p>Turms与其他常规服务端一样，将可观测性的具体实现分为三类，即：<code>度量（可聚合数值）</code>、<code>日志（事件）</code>、<code>链路追踪（面向请求）</code>。</p><h2 id="度量" tabindex="-1"><a class="header-anchor" href="#度量" aria-hidden="true">#</a> 度量</h2><p>度量由可聚合数值构成，总体分为<code>系统度量</code>、<code>应用度量</code>与<code>业务度量</code>。系统度量用于观察系统或容器的运行状态与趋势；应用度量用于观察JVM与Turms应用层的运行状态和趋势；业务度量用于观察业务发展的状态和趋势。在默认不落盘采样的情况下，只占用极小部分的内存空间。</p><p>另外，在具体的代码实现上，Turms的度量体系基于主流度量采样项目<a href="https://github.com/micrometer-metrics/micrometer" target="_blank" rel="noopener noreferrer">Micrometer<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>来实现。并提供接口<code>/metrics</code>来导出JSON格式，<code>/metrics/prometheus</code>来导出OpenMetrics格式，<code>/metrics/csv</code>来导出CSV格式。</p><p>注意：还有一类实现起来相对耗系统资源的统计数据，诸如日活/周活/月活，用户留存率等，这些功能的实现都很常规。但这类相对高纬度的功能适合专门的日志服务或产品来实现，故Turms不直接提供该类数据。</p><h3 id="系统度量" tabindex="-1"><a class="header-anchor" href="#系统度量" aria-hidden="true">#</a> 系统度量</h3><p>云服务厂商也都有提供该类度量，并且其度量点通常更丰富，存储、展示与分析等功能也是开箱即用。Turms提供以下重要度量主要是尽一个服务端应尽的责任，满足不上云用户以及部分用户的定制化需求。对于能使用云服务的用户，应该优先考虑使用云服务。</p><table><thead><tr><th>类别</th><th>名称</th><th>类型</th><th>含义</th></tr></thead><tbody><tr><td>Uptime（运行时间）</td><td>process.uptime</td><td>TimeGauge</td><td>进程已运行时长</td></tr><tr><td></td><td>process.start.time</td><td>TimeGauge</td><td>进程启动时间</td></tr><tr><td>Processor（处理器）</td><td>system.cpu.count</td><td>Gauge</td><td>进程可用CPU核数</td></tr><tr><td></td><td>system.load.average.1m</td><td>Gauge</td><td>最近一分钟系统CPU负载</td></tr><tr><td></td><td>system.cpu.usage</td><td>Gauge</td><td>最近系统CPU使用率</td></tr><tr><td></td><td>process.cpu.usage</td><td>Gauge</td><td>最近进程CPU使用率</td></tr><tr><td>FileDescriptor</td><td>process.files.open</td><td>Gauge</td><td>打开的文件描述符数</td></tr><tr><td></td><td>process.files.max</td><td>Gauge</td><td>可打开的最大文件描述符数</td></tr></tbody></table><h3 id="应用度量" tabindex="-1"><a class="header-anchor" href="#应用度量" aria-hidden="true">#</a> 应用度量</h3><h4 id="jvm度量" tabindex="-1"><a class="header-anchor" href="#jvm度量" aria-hidden="true">#</a> JVM度量</h4><p>以下基于HotSpot虚拟机进行含义描述，Turms不对其他虚拟机提供官方支持。</p><table><thead><tr><th>类别</th><th>名称</th><th>类型</th><th>含义</th></tr></thead><tbody><tr><td>GC</td><td>jvm.gc.max.data.size</td><td>Gauge</td><td>老年代最大可用堆内内存</td></tr><tr><td></td><td>jvm.gc.live.data.size</td><td>Gauge</td><td>GC后，老年代占用的内存空间</td></tr><tr><td></td><td>jvm.gc.memory.allocated</td><td>Counter</td><td>Eden区一共被分配的内存空间</td></tr><tr><td></td><td>jvm.gc.memory.promoted</td><td>Counter</td><td>老年代一共被分配的内存空间</td></tr><tr><td></td><td>jvm.gc.pause</td><td>Timer</td><td>GC耗时</td></tr><tr><td>Memory</td><td>jvm.buffer.count</td><td>Gauge</td><td>各内存缓冲区池内，内存缓冲区的个数</td></tr><tr><td></td><td>jvm.buffer.memory.used</td><td>Gauge</td><td>各内存缓冲区池的已使用内存<br>注意：Turms应用层使用的堆外内存都记录在这</td></tr><tr><td></td><td>jvm.buffer.total.capacity</td><td>Gauge</td><td>各内存缓冲区池的总容量</td></tr><tr><td></td><td>jvm.memory.used</td><td>Gauge</td><td>各内存池的已使用内存<br>注意：Turms应用层使用的堆外内存不会被记录在这</td></tr><tr><td></td><td>jvm.memory.committed</td><td>Gauge</td><td>各内存池的可用内存</td></tr><tr><td></td><td>jvm.memory.max</td><td>Gauge</td><td>各内存池的最大内存</td></tr><tr><td>Thread</td><td>jvm.threads.peak</td><td>Gauge</td><td>峰值线程数</td></tr><tr><td></td><td>jvm.threads.daemon</td><td>Gauge</td><td>守护线程数</td></tr><tr><td></td><td>jvm.threads.live</td><td>Gauge</td><td>当前活跃线程数</td></tr><tr><td></td><td>jvm.threads.states</td><td>Gauge</td><td>各线程状态下的线程数</td></tr><tr><td>Class</td><td>jvm.classes.loaded</td><td>Gauge</td><td>已加载classes数</td></tr><tr><td></td><td>jvm.classes.unloaded</td><td>Counter</td><td>已卸载classes数</td></tr></tbody></table><p>注意：Turms在进行网络IO操作时，使用的都是内存池中的堆外内存（即通过Netty的PooledByteBufAllocator分配堆外内存），通过故意不释放堆外内存，并将这些堆外内存缓存起来，来避免低效的堆外内存分配与释放操作，因此Turms的内存占用率会持续走高，并且总体没有下降趋势。这不是内存泄漏，只是Turms在缓存这些堆外内存。</p><h4 id="集群间tcp连接度量" tabindex="-1"><a class="header-anchor" href="#集群间tcp连接度量" aria-hidden="true">#</a> 集群间TCP连接度量</h4><p>在连接度量中，因为服务端的节点数有限，所以每个度量都会把TCP端的远程地址作为tag，来区分每个TCP端各自的度量数据，以更细致地观察节点之间的通信情况。</p><h5 id="tcp服务端" tabindex="-1"><a class="header-anchor" href="#tcp服务端" aria-hidden="true">#</a> TCP服务端</h5><table><thead><tr><th>类型</th><th>名称</th><th>类型</th><th>含义</th></tr></thead><tbody><tr><td>Connection（连接）</td><td>turms.node.tcp.server.data.received</td><td>DistributionSummary</td><td>已接收字节数</td></tr><tr><td></td><td>turms.node.tcp.server.data.sent</td><td>DistributionSummary</td><td>已发送字节数</td></tr><tr><td></td><td>turms.node.tcp.server.errors</td><td>Counter</td><td>连接异常触发次数</td></tr><tr><td></td><td>turms.node.tcp.server.tls.handshake.time</td><td>Timer</td><td>TLS握手用时</td></tr><tr><td>ByteBufAllocator（内存）</td><td>TODO</td><td></td><td></td></tr></tbody></table><h5 id="tcp客户端" tabindex="-1"><a class="header-anchor" href="#tcp客户端" aria-hidden="true">#</a> TCP客户端</h5><table><thead><tr><th>类型</th><th>名称</th><th>类型</th><th>含义</th></tr></thead><tbody><tr><td>Connection（连接）</td><td>turms.node.tcp.client.data.received</td><td>DistributionSummary</td><td>已接收字节数</td></tr><tr><td></td><td>turms.node.tcp.client.data.sent</td><td>DistributionSummary</td><td>已发送字节数</td></tr><tr><td></td><td>turms.node.tcp.client.errors</td><td>Counter</td><td>连接异常触发次数</td></tr><tr><td></td><td>turms.node.tcp.client.tls.handshake.time</td><td>Timer</td><td>TLS握手用时</td></tr><tr><td></td><td>turms.node.tcp.client.connect.time</td><td>Timer</td><td>TCP连接建立用时</td></tr><tr><td></td><td>turms.node.tcp.client.address.resolver</td><td>Timer</td><td>地址解析用时</td></tr><tr><td>ByteBufAllocator（内存）</td><td>TODO</td><td></td><td></td></tr></tbody></table><h4 id="rpc度量" tabindex="-1"><a class="header-anchor" href="#rpc度量" aria-hidden="true">#</a> RPC度量</h4><table><thead><tr><th>名称</th><th>类型</th><th>含义</th></tr></thead><tbody><tr><td>rpc.request.subscribed</td><td>Counter</td><td>某类型RPC请求的已处理次数</td></tr><tr><td>rpc.request.flow.duration</td><td>Timer</td><td>某类型RPC请求的处理时长</td></tr></tbody></table><h4 id="admin-api度量" tabindex="-1"><a class="header-anchor" href="#admin-api度量" aria-hidden="true">#</a> Admin API度量</h4><p>因为管理员的IP可以无限多，所以每个度量<strong>不会</strong>把对端的远程地址作为tag，来区分每个端各自的度量数据。</p><table><thead><tr><th>类型</th><th>名称</th><th>类型</th><th>含义</th></tr></thead><tbody><tr><td>Connection（连接）</td><td>admin.api.data.received</td><td>DistributionSummary</td><td>已接收字节数</td></tr><tr><td></td><td>admin.api.data.sent</td><td>DistributionSummary</td><td>已发送字节数</td></tr><tr><td></td><td>admin.api.errors</td><td>Counter</td><td>连接异常触发次数</td></tr><tr><td></td><td>admin.api.tls.handshake.time</td><td>Timer</td><td>TLS握手用时</td></tr></tbody></table><h4 id="turms客户端度量" tabindex="-1"><a class="header-anchor" href="#turms客户端度量" aria-hidden="true">#</a> Turms客户端度量</h4><p>在连接度量中，因为客户端的数量无限多，所以每个度量<strong>不会</strong>把对端的远程地址作为tag，来区分每个端各自的度量数据。另外，连接度量通过tag <code>uri</code>来区分TCP/UDP/WebSocket三类连接各自的度量数据。</p><table><thead><tr><th>类型</th><th>名称</th><th>类型</th><th>含义</th></tr></thead><tbody><tr><td>Connection（连接）</td><td>turms.client.network.data.received</td><td>DistributionSummary</td><td>已接收字节数</td></tr><tr><td></td><td>turms.client.network.data.sent</td><td>DistributionSummary</td><td>已发送字节数</td></tr><tr><td></td><td>turms.client.network.errors</td><td>Counter</td><td>连接异常触发次数</td></tr><tr><td></td><td>turms.client.network.tls.handshake.time</td><td>Timer</td><td>TLS握手用时</td></tr><tr><td></td><td>turms.client.network.connect.time</td><td>Timer</td><td>连接建立用时</td></tr><tr><td></td><td>turms.client.network.address.resolver</td><td>Timer</td><td>域名解析用时</td></tr><tr><td>Request（请求）</td><td>turms.client.request.subscribed</td><td>Counter</td><td>某类型客户端请求的已处理次数</td></tr><tr><td></td><td>turms.client.request.flow.duration</td><td>Timer</td><td>某类型客户端请求的处理时长</td></tr><tr><td>ConnectionProvider（连接池）</td><td>TODO</td><td></td><td></td></tr><tr><td>ByteBufAllocator（内存）</td><td>TODO</td><td></td><td></td></tr></tbody></table><h3 id="业务度量" tabindex="-1"><a class="header-anchor" href="#业务度量" aria-hidden="true">#</a> 业务度量</h3><table><thead><tr><th>服务端</th><th>名称</th><th>类型</th><th>含义</th></tr></thead><tbody><tr><td>turms-gateway</td><td>user.logged_in</td><td>Counter</td><td>登录用户数</td></tr><tr><td></td><td>user.online</td><td>Gauge</td><td>在线用户数</td></tr><tr><td>turms-service</td><td>user.registered</td><td>Counter</td><td>注册用户数</td></tr><tr><td></td><td>user.deleted</td><td>Counter</td><td>注销用户数</td></tr><tr><td></td><td>group.created</td><td>Counter</td><td>创建群组数</td></tr><tr><td></td><td>group.deleted</td><td>Counter</td><td>注销群组数</td></tr><tr><td></td><td>msg.sent</td><td>Counter</td><td>已发送消息数</td></tr></tbody></table><h2 id="日志" tabindex="-1"><a class="header-anchor" href="#日志" aria-hidden="true">#</a> 日志</h2><p>每条日志都对应着Turms服务端运行时发生的事件，用于追踪系统的运行状态与生成高纬度的统计数据。Turms中的日志分类两大类，即<code>应用日志</code>与<code>业务日志</code>。应用运行日志本身数量不多，占用空间不大，遵循精与准原则。但为业务分析而设计的客户端API访问日志则不同，它是大部分统计数据的基础数据，是企业的重要资产，因此Turms默认对其进行100%采样，存储消耗巨大。</p><p>注意：Turms的所有日志、度量与链路追踪的数据格式设计，都是兼顾“简单快捷，方便快速查询”与“精准采样，方便日志服务分析”设计的，但Turms本身不提供任何日志分析功能。</p><h3 id="不使用json格式的原因" tabindex="-1"><a class="header-anchor" href="#不使用json格式的原因" aria-hidden="true">#</a> 不使用JSON格式的原因</h3><p>随着微服务的发展，JSON格式日志逐渐流行，比如MongoDB就在4.4版本时开始支持JSON格式日志。使用JSON格式主要有以下三大优点：</p><ul><li>极大地统一了各服务端的日志格式。尤其对于具有数十/百/千个异构服务端的公司而言，是必须强制要求各项目使用JSON日志格式的</li><li>各编程语言均对JSON有良好支持，日志打印与解析几乎无难度可言</li><li>各云厂商的日志服务对JSON格式日志都有着良好的支持，可以实现开箱即用</li></ul><p>Turms服务端不使用JSON格式的原因是：</p><ul><li>Turms服务端构成很简单，不需要通过JSON来统一日志格式。</li><li>JSON序列化需要占用额外内存与CPU资源，且存储开销大，如果使用压缩技术，还要额外占用CPU资源。特别是，序列化加上压缩时所需的CPU资源甚至比Turms服务端处理业务请求所需CPU资源还高，这对Turms来说是难以接受的。</li><li>JSON格式其实在原始数据可读性上并不好。因为原始日志是以单行形式进行展示，一行即表明一个事件。JSON格式在单行显示时，会带来大量“噪音”，大量的JSON元数据、JSON键与JSON值纵横交错，直接阅读原始数据的话就比较费力。而Turms服务端的客户端API访问日志通过<code>|</code>分隔符拆分各字段。用户初次只需要多看几个日志，之后就能反应出各字段是代表什么信息。</li></ul><p>当然，采用传统的单行格式会造成云服务解析相对复杂，且配置不灵活。但考虑到这种东西配一次即一劳永逸，综合考虑以上情况，Turms服务端日志不采用JSON格式，而仍采用传统的单行格式。</p><h3 id="类别" tabindex="-1"><a class="header-anchor" href="#类别" aria-hidden="true">#</a> 类别</h3><h4 id="gc日志" tabindex="-1"><a class="header-anchor" href="#gc日志" aria-hidden="true">#</a> GC日志</h4><p>用于JVM性能测试、分析调优、排查定位问题。</p><p>turms-gateway的服务端JVM GC配置为：<code>-Xlog:gc*,gc+age=trace,safepoint:file=${TURMS_GATEWAY_HOME}/log/turms-gateway-gc.log:utctime,pid,tags:filecount=32,filesize=32m</code></p><p>turms-service的服务端JVM GC配置为：<code>-Xlog:gc*,gc+age=trace,safepoint:file=${TURMS_SERVICE_HOME}/log/turms-service-gc.log:utctime,pid,tags:filecount=32,filesize=32m</code></p><h4 id="服务端运行日志" tabindex="-1"><a class="header-anchor" href="#服务端运行日志" aria-hidden="true">#</a> 服务端运行日志</h4><p>描述Turms服务端内发生的主要事件，如RPC连接状态的转变、请求处理中服务端错误的发生等。</p><p>文件名：<code>turms-gateway.log</code>（turms-gateway服务端）；<code>turms-service.log</code>（turms-service服务端）</p><p>构成：事件发送时间、日志等级、服务端类型、节点ID、Trace ID、线程、类、消息。其中，服务端信息的主要作用是在分布式日志采集过程中，用于区分日志的来源节点。其他类型日志也都使用这样的日志格式（除了客户端API访问日志与通知日志不记录“类”信息），它们只是在“消息”部分使用了定制化的消息格式。</p><p>格式：<code>%d{${sys:LOG_DATEFORMAT_PATTERN}}{GMT+0} ${sys:LOG_LEVEL_PATTERN} ${myctx:NODE_TYPE} ${myctx:NODE_ID} %-19.19X{traceId} %t %-40.40c{1.} : %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}</code></p><p>解析Regex：<code>(?P&lt;time&gt;\d{4}-\d{2}-\d{2}\s\d{1,2}\:\d{2}\:\d{2}\.\d{3})\s+(?P&lt;level&gt;[A-Z]{4,5})\s+(?P&lt;node_type&gt;[A-Z])\s+(?P&lt;node_id&gt;\S*)\s+\[(?P&lt;trace_id&gt;.{19})\]\s+(?P&lt;thread&gt;\S*)\s+(?P&lt;class&gt;\S*)\s+:\s(?P&lt;msg&gt;.*)</code></p><p>示例：</p><div class="language-spreadsheet ext-spreadsheet line-numbers-mode"><pre class="language-spreadsheet"><code>2021-08-08 09:52:15.602 ERROR S idanvacg 6404110606919452669 AsyncGetter-1-thread-1 i.t.s.c.c.s.r.RpcService                 : Cannot send response to disposed connection: ServiceResponse{dataForRequester=null, code=SERVER_INTERNAL_ERROR, reason=&#39;The pool is closed&#39;}
2021-08-08 14:02:53.123  INFO S xyzjjrhv                     parallel-2 i.t.s.c.c.s.c.ConnectionService          : [Client] Connecting to member: fqfgnyop[192.168.3.2:7511]. Retry times: 0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="admin-api访问日志-审计日志" tabindex="-1"><a class="header-anchor" href="#admin-api访问日志-审计日志" aria-hidden="true">#</a> Admin API访问日志（审计日志）</h4><p>记录管理员对Turms服务端的各种操作。</p><p>文件名：<code>turms-service-admin-api.log</code></p><p>格式：<code>管理员账号|管理员IP|请求时间|请求API|请求参数|处理结果|处理时间|处理异常信息</code>。其中：</p><ul><li>会话信息：管理员账号、管理员IP</li><li>请求信息：请求时间、请求API、请求参数</li><li>响应信息：处理结果、处理时间、处理异常信息</li></ul><p>示例：</p><div class="language-spreadsheet ext-spreadsheet line-numbers-mode"><pre class="language-spreadsheet"><code>2021-09-02 07:19:27.219  INFO S wzocsebz 3501287524626242885 Thread-28 : turms|0:0:0:0:0:0:0:1|2021-09-02T07:30:30.414Z|updateUser|1|{ids=[1], updateUserDTO=UpdateUserDTO[password=******, name=null, intro=null, profileAccess=null, permissionGroupId=null, registrationDate=null, isActive=null]}|TRUE|
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="客户端api访问日志" tabindex="-1"><a class="header-anchor" href="#客户端api访问日志" aria-hidden="true">#</a> 客户端API访问日志</h4><p>由于客户端API访问日志数据是企业的重要资产，因此再次强调：该日志看似简单常规，但其衍生出的运营数据可以高达上百项，既是企业的宝库，也是指引产品发展方向的灯塔。宁可因为100%采样落盘导致服务端吞吐量大减，也不建议您修改相关配置。除非您明确知道且能承受修改参数后会带来的后果。</p><h5 id="turms-gateway服务端" tabindex="-1"><a class="header-anchor" href="#turms-gateway服务端" aria-hidden="true">#</a> turms-gateway服务端</h5><p>文件名：<code>turms-gateway-client-api.log</code></p><p>格式：<code>会话ID|用户ID|设备|版本|IP|请求ID|请求类型|请求大小|请求时间|响应状态码|响应数据类型|响应大小|处理时间</code>。其中：</p><ul><li>会话信息：会话ID、用户ID、设备、版本、IP</li><li>请求信息：请求ID、请求类型、请求大小、请求时间</li><li>响应信息：响应状态码、响应数据类型、响应大小、处理时间</li></ul><p>示例：</p><div class="language-spreadsheet ext-spreadsheet line-numbers-mode"><pre class="language-spreadsheet"><code>2021-08-17 13:21:10.082  INFO G ocnpinxk 4073578036035627538 gateway-tcp-worker-18-2 : 1669286372|100|DESKTOP|1|0:0:0:0:0:0:0:1|6275734689527119988|CREATE_GROUP_MEMBER_REQUEST|32|2021-08-17T13:21:10.079Z|1201||21|3
2021-08-17 13:21:10.086  INFO G ocnpinxk 8485909300068121199 gateway-tcp-worker-18-1 : 315622910|101|DESKTOP|1|0:0:0:0:0:0:0:1|8981788720014999664|QUERY_GROUP_JOIN_REQUESTS_REQUEST|17|2021-08-17T13:21:10.082Z|1201||21|4
2021-08-17 13:21:10.087  INFO G ocnpinxk 195568170846055794  gateway-tcp-worker-18-2 : 1669286372|100|DESKTOP|1|0:0:0:0:0:0:0:1|7875023820838742819|CREATE_GROUP_JOIN_QUESTION_REQUEST|181|2021-08-17T13:21:10.083Z|1201||21|4
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="turms-service服务端" tabindex="-1"><a class="header-anchor" href="#turms-service服务端" aria-hidden="true">#</a> turms-service服务端</h5><p>文件名：<code>turms-service-client-api.log</code></p><p>格式：<code>用户ID|设备|IP|请求ID|请求类型|请求大小|请求时间|响应状态码|响应数据类型|处理时间</code>。其中：</p><ul><li>会话信息：用户ID、设备、IP</li><li>请求信息：请求ID、请求类型、请求大小、请求时间</li><li>响应信息：响应状态码、响应数据类型、处理时间</li></ul><p>示例：</p><div class="language-spreadsheet ext-spreadsheet line-numbers-mode"><pre class="language-spreadsheet"><code>2021-08-17 13:25:11.809  INFO S lkumxlpd 1650561895646191481 Thread-13 : 101|DESKTOP|::1|6798130843268792999|QUERY_MESSAGES_REQUEST|28|2021-08-17T13:25:11.807Z|1001||2
2021-08-17 13:25:11.809  INFO S lkumxlpd 2979813149711907727 Thread-9 : 100|DESKTOP|::1|5095384146247218867|QUERY_GROUP_JOIN_QUESTIONS_REQUEST|17|2021-08-17T13:25:11.807Z|1002||2
2021-08-17 13:25:11.809  INFO S lkumxlpd 7231219143674352809 ver-worker-14-1 : 101|DESKTOP|::1|358075665001342897|QUERY_SIGNED_GET_URL_REQUEST|40|2021-08-17T13:25:11.809Z|6000||0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>补充：</p><ul><li>在Turms服务端的客户端API访问日志中，一个请求的“开始时间”实际指的是“服务端成功接收一个请求所包含的数据流，但尚未进行解析”这一时刻，而非“服务端接收到请求的第一个字节”这一时刻。</li><li>请求的执行是异步的。假设一个请求执行时间是1秒，但其占用Turms服务端的CPU时间可能就只有几毫秒，其他时间CPU都在处理其他请求，不会出现CPU闲置等待的情况。</li></ul><h5 id="特殊请求日志处理-拓展知识" tabindex="-1"><a class="header-anchor" href="#特殊请求日志处理-拓展知识" aria-hidden="true">#</a> 特殊请求日志处理（拓展知识）</h5><p>在日志方面，最为特殊API请求是<code>删除会话请求</code>。具体体现在：</p><p>删除会话请求是唯一一个可以不由用户发出，但却被记录在客户端API访问日志的请求。具体会发送在：如果客户端在没发送“删除会话请求”之前，就断开了底层TCP连接，那么对应的turms-gateway就会在TCP连接关闭之时，主动生成一条效果与“删除会话请求”一样的日志，通过这种方式保证客户端API访问日志的逻辑一致性。</p><p>另外，在客户端的实现中，除非您指定通过<code>DeleteSessionRequest</code>进行会话关闭，默认情况下是直接关闭TCP连接来关闭上层会话。当前的<code>DeleteSessionRequest</code>其实是其“占位符”作用，一是通过“请求”这一模型保持业务逻辑处理的一致，二是为了预留给未来做更灵活的关闭会话逻辑。</p><h4 id="通知日志" tabindex="-1"><a class="header-anchor" href="#通知日志" aria-hidden="true">#</a> 通知日志</h4><p>部分客户端请求与管理员API请求会触发对其他用户的通知，如“正在输入”与“添加好友”通知。该日志用于该类通知事件。</p><p>补充：</p><ul><li><code>通知日志记录</code>与<code>客户端API访问日志记录</code>可以一一对应起来。具体而言，可以通过通知日志记录中的<code>Trace ID</code>或<code>Request ID</code>字段将二者关联。</li><li>通知的发起操作只会由turms-service执行。turms-service通过<code>SendNotificationRequest</code>这一RPC请求，将通知操作代理给turms-gateway，让其进行实际的通知下推操作</li></ul><h5 id="turms-gateway服务端-1" tabindex="-1"><a class="header-anchor" href="#turms-gateway服务端-1" aria-hidden="true">#</a> turms-gateway服务端</h5><p>文件名：<code>turms-gateway-notification.log</code></p><p>格式：<code>通知触发用户ID|发送状态|通知目标用户数|会话关闭状态码|通知大小|通知转发的请求类型</code>。其中：</p><ul><li>通知触发用户信息：通知触发用户ID</li><li>通知信息：发送状态、通知目标用户数、会话关闭状态码、通知大小</li><li>通知转发的请求信息：通知转发的请求类型</li></ul><p>示例：</p><div class="language-spreadsheet ext-spreadsheet line-numbers-mode"><pre class="language-spreadsheet"><code>2021-09-03 00:08:22.537  INFO G hkivjeav 3166178398923546492 -client-io-15-3 : 149|SENT|1||75|UPDATE_FRIEND_REQUEST_REQUEST
2021-09-03 00:08:37.636  INFO G hkivjeav 8332948877634499289 -client-io-15-3 : 190|SENT|1||19|UPDATE_TYPING_STATUS_REQUEST
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="turms-service服务端-1" tabindex="-1"><a class="header-anchor" href="#turms-service服务端-1" aria-hidden="true">#</a> turms-service服务端</h5><p>文件名：<code>turms-service-notification.log</code></p><p>格式：<code>通知触发用户ID|发送状态|通知目标用户数|会话关闭状态码|通知大小|通知转发的请求ID|通知转发的请求类型</code>。其中：</p><ul><li>通知触发用户信息：通知触发用户ID</li><li>通知信息：发送状态、通知目标用户数、会话关闭状态码、通知大小</li><li>通知转发的请求信息：通知转发的请求ID、通知转发的请求类型</li></ul><p>示例：</p><div class="language-spreadsheet ext-spreadsheet line-numbers-mode"><pre class="language-spreadsheet"><code>2021-09-03 00:08:22.537  INFO S hkivjeav 3166178398923546492 -client-io-15-3 : 149|SENT|1||75|4971734074638762694|UPDATE_FRIEND_REQUEST_REQUEST
2021-09-03 00:08:37.636  INFO S hkivjeav 8332948877634499289 -client-io-15-3 : 190|SENT|1||19|6469201046445182337|UPDATE_TYPING_STATUS_REQUEST
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="慢日志" tabindex="-1"><a class="header-anchor" href="#慢日志" aria-hidden="true">#</a> 慢日志</h4><p>TODO</p><h3 id="采集与分析" tabindex="-1"><a class="header-anchor" href="#采集与分析" aria-hidden="true">#</a> 采集与分析</h3><p>Turms只提供原始数据，不提供也没计划提供日志采集与分析功能。</p><h4 id="原因" tabindex="-1"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</h4><ul><li>现在云厂商都支持日志的采集、解析、存储、检索、分析报警等等高级服务。通过SQL检索，来获取各种高纬度统计数据与图表（诸如：日活、月活、日消息发送量、会话存留时长、新会话占比、留存率等等运营数据）。正是因为该方案已成为行业最佳实践之一，所以Turms自身不提供一些相对复杂、更适合大数据项目来做的功能。</li><li>日志收集相关技术都很常规。但从商业价值角度去合理规划什么日志应该收集，什么字段应该索引、什么日志应该实时分析、什么日志应该离线分析，这些与商业价值与成本直接挂钩的问题才是难点所在。因此在商业价值考量方面，Turms只能给建议，而非直接插手干预。</li><li>日志相关服务与产品百家争鸣，而Turms服务端的日志相关实现应当保持中立，因此Turms服务端自身不接入任何的SDK，只提供原始日志供日志相关服务采集。</li><li>从微服务职责划分的角度来看，Turms服务端的功能也不应该过于耦合。</li></ul><h2 id="链路追踪" tabindex="-1"><a class="header-anchor" href="#链路追踪" aria-hidden="true">#</a> 链路追踪</h2><h3 id="作用" tabindex="-1"><a class="header-anchor" href="#作用" aria-hidden="true">#</a> 作用</h3><p>面向请求，用于快速追踪请求在节点之间与具体节点内的执行情况。</p><h3 id="实现" tabindex="-1"><a class="header-anchor" href="#实现" aria-hidden="true">#</a> 实现</h3><p>在链路追踪实现规范<a href="https://opentracing.io/specification" target="_blank" rel="noopener noreferrer">OpenTracing<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>中，其规定了要使用Trace与Span作为链路追踪的单位。但与动辄数十个、上百个甚至上千个微服务应用相比，Turms的调用链路极为简单，完全不需要通过Span信息来追踪请求。并且，如果Turms采用标准OpenTracing实现，那么很多请求的链路追踪附加信息甚至会比大部分的RPC请求正文还大。</p><p>因此，Turms仅仅是在所有日志中添加了一个用于表示<code>trace ID</code>的字段，开发者在进行链路追踪时，仅需要通过查询<code>trace ID</code>字段，即可明白该请求经过的所有节点，与在节点内的执行情况。</p><h2 id="监控与报警" tabindex="-1"><a class="header-anchor" href="#监控与报警" aria-hidden="true">#</a> 监控与报警</h2><p>在可观测体系中，系统需要根据度量与日志来实时监控服务端运行状态，并在发现系统异常时进行报警通知。</p><p>Turms不提供且也没计划提供报警功能。一方面，云服务或其他相关产品都提供了极为丰富、成熟且开箱即用的度量与日志的采集、分析与报警等功能。另一方面，从微服务职责划分的角度来看，Turms服务端的功能也不应该过于耦合。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/turms-im/turms/edit/main/for-developers/observability.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><span class="meta-item-info">10/5/2021, 3:58:31 AM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/docs/for-developers/schema.html" class="nav-link" aria-label="集合结构设计"><!--[--><!--]--> 集合结构设计 <!--[--><!--]--></a></span><span class="next"><a href="/docs/for-developers/security.html" class="nav-link" aria-label="安全"><!--[--><!--]--> 安全 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/docs/assets/js/runtime~app.02ccf936.js" defer></script><script src="/docs/assets/js/567.2446e979.js" defer></script><script src="/docs/assets/js/app.97d818d5.js" defer></script>
  </body>
</html>
